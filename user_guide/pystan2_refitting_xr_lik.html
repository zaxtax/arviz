
<!DOCTYPE html>

<html>
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><meta content="Docutils 0.17.1: http://docutils.sourceforge.net/" name="generator"/>
<title>Refitting PyStan (2.x) models with ArviZ (and xarray) — ArviZ dev documentation</title>
<link href="../_static/css/theme.css" rel="stylesheet"/>
<link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet"/>
<link href="../_static/vendor/fontawesome/5.13.0/css/all.min.css" rel="stylesheet"/>
<link as="font" crossorigin="" href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2" rel="preload" type="font/woff2"/>
<link as="font" crossorigin="" href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2" rel="preload" type="font/woff2"/>
<link href="../_static/pygments.css" rel="stylesheet" type="text/css">
<link href="../_static/css/blank.css" rel="stylesheet" type="text/css">
<link href="../_static/plot_directive.css" rel="stylesheet" type="text/css">
<link href="../_static/togglebutton.css" rel="stylesheet" type="text/css">
<link href="../_static/mystnb.css" rel="stylesheet" type="text/css">
<link href="../_static/copybutton.css" rel="stylesheet" type="text/css"/>
<link href="../_static/sphinx-codeautolink.css" rel="stylesheet" type="text/css"/>
<link href="../_static/design-style.59c74d8c95b765a7fd995ac71d459ebe.min.css" rel="stylesheet" type="text/css"/>
<link as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js" rel="preload"/>
<script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
<script src="../_static/jquery.js"></script>
<script src="../_static/underscore.js"></script>
<script src="../_static/doctools.js"></script>
<script src="../_static/togglebutton.js"></script>
<script src="../_static/clipboard.min.js"></script>
<script src="../_static/copybutton.js"></script>
<script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
<script src="../_static/design-tabs.js"></script>
<link href="../_static/favicon.ico" rel="shortcut icon">
<link href="../genindex.html" rel="index" title="Index"/>
<link href="../search.html" rel="search" title="Search"/>
<link href="pymc3_refitting_xr_lik.html" rel="next" title="Refitting PyMC3 models with ArviZ (and xarray)"/>
<link href="numpyro_refitting.html" rel="prev" title="Refitting NumPyro models with ArviZ"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<meta content="None" name="docsearch:language"/>
<!-- Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-W1G68W77YV"></script>
<script>
                    window.dataLayer = window.dataLayer || [];
                    function gtag(){ dataLayer.push(arguments); }
                    gtag('js', new Date());
                    gtag('config', 'G-W1G68W77YV');
                </script>
</link></link></link></link></link></link></head>
<body data-offset="80" data-spy="scroll" data-target="#bd-toc-nav">
<div class="container-fluid" id="banner"></div>
<nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">
<div id="navbar-start">
<a class="navbar-brand" href="../index.html">
<img alt="logo" class="logo" src="../_static/logo.png"/>
</a>


    
    dev
    
  </div>
<button aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler" data-target="#navbar-collapsible" data-toggle="collapse" type="button">
<span class="navbar-toggler-icon"></span>
</button>
<div class="col-lg-9 collapse navbar-collapse" id="navbar-collapsible">
<div class="mr-auto" id="navbar-center">
<div class="navbar-center-item">
<ul class="navbar-nav" id="navbar-main-elements">
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link" href="../getting_started/index.html">
  Getting Started
 </a>
</li>
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link" href="../examples/index.html">
  Example Gallery
 </a>
</li>
<li class="toctree-l1 current active nav-item">
<a class="reference internal nav-link" href="index.html">
  User Guide
 </a>
</li>
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link" href="../api/index.html">
  API Reference
 </a>
</li>
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link" href="../community.html">
  Community
 </a>
</li>
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link" href="../contributing/index.html">
  Contributing
 </a>
</li>
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link" href="../about_us.html">
  About us
 </a>
</li>
</ul>
</div>
</div>
<div id="navbar-end">
<div class="navbar-end-item">
<ul aria-label="Icon Links" class="navbar-nav" id="navbar-icon-links">
<li class="nav-item">
<a class="nav-link" href="https://github.com/arviz-devs/arviz" rel="noopener" target="_blank" title="GitHub">
<span><i class="fab fa-github-square"></i></span>
<label class="sr-only">GitHub</label>
</a>
</li>
<li class="nav-item">
<a class="nav-link" href="https://twitter.com/arviz_devs" rel="noopener" target="_blank" title="Twitter">
<span><i class="fab fa-twitter-square"></i></span>
<label class="sr-only">Twitter</label>
</a>
</li>
</ul>
</div>
</div>
</div>
</div>
</nav>
<div class="container-xl">
<div class="row">
<!-- Only show if we have sidebars configured, else just a small margin  -->
<div class="col-12 col-md-3 bd-sidebar"><form action="../search.html" class="bd-search d-flex align-items-center" method="get">
<i class="icon fas fa-search"></i>
<input aria-label="Search the docs ..." autocomplete="off" class="form-control" id="search-input" name="q" placeholder="Search the docs ..." type="search"/>
</form><nav aria-label="Main navigation" class="bd-links" id="bd-docs-nav">
<div class="bd-toc-item active">
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children">
<a class="reference internal" href="plotting.html">
   Plotting
  </a>
<input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox">
<label for="toctree-checkbox-1">
<i class="fas fa-chevron-down">
</i>
</label>
<ul>
<li class="toctree-l2">
<a class="reference internal" href="plots_arguments_guide.html">
     Plots’ arguments guide
    </a>
</li>
</ul>
</input></li>
<li class="toctree-l1 has-children">
<a class="reference internal" href="data_structures.html">
   Data structures
  </a>
<input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
<label for="toctree-checkbox-2">
<i class="fas fa-chevron-down">
</i>
</label>
<ul>
<li class="toctree-l2">
<a class="reference internal" href="label_guide.html">
     Label guide
    </a>
</li>
<li class="toctree-l2 has-children">
<a class="reference internal" href="../schema/schema.html">
     InferenceData schema specification
    </a>
<input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
<label for="toctree-checkbox-3">
<i class="fas fa-chevron-down">
</i>
</label>
<ul>
<li class="toctree-l3">
<a class="reference internal" href="../schema/PyMC3_schema_example.html">
       PyMC3 example
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../schema/PyStan_schema_example.html">
       PyStan example
      </a>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children">
<a class="reference internal" href="computation.html">
   Computation
  </a>
<input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
<label for="toctree-checkbox-4">
<i class="fas fa-chevron-down">
</i>
</label>
<ul>
<li class="toctree-l2">
<a class="reference internal" href="Numba.html">
     Numba -  an overview
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="Dask.html">
     Dask for ArviZ
    </a>
</li>
</ul>
</li>
<li class="toctree-l1 current active has-children">
<a class="reference internal" href="sampling_wrappers.html">
   Sampling wrappers
  </a>
<input checked="" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
<label for="toctree-checkbox-5">
<i class="fas fa-chevron-down">
</i>
</label>
<ul class="current">
<li class="toctree-l2">
<a class="reference internal" href="pystan2_refitting.html">
     Refitting PyStan (2.x) models with ArviZ
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="pystan_refitting.html">
     Refitting PyStan (3.0+) models with ArviZ
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="pymc3_refitting.html">
     Refitting PyMC3 models with ArviZ
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="numpyro_refitting.html">
     Refitting NumPyro models with ArviZ
    </a>
</li>
<li class="toctree-l2 current active">
<a class="current reference internal" href="#">
     Refitting PyStan (2.x) models with ArviZ (and xarray)
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="pymc3_refitting_xr_lik.html">
     Refitting PyMC3 models with ArviZ (and xarray)
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="numpyro_refitting_xr_lik.html">
     Refitting NumPyro models with ArviZ (and xarray)
    </a>
</li>
</ul>
</li>
</ul>
</div>
</nav>
</div>
<div class="d-none d-xl-block col-xl-2 bd-toc">
<div class="toc-item">
<nav id="bd-toc-nav">
</nav>
</div>
<div class="toc-item">
</div>
</div>
<main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
<div>
<section class="tex2jax_ignore mathjax_ignore" id="refitting-pystan-2-x-models-with-arviz-and-xarray">
<span id="pystan2-refitting-xr"></span><h1>Refitting PyStan (2.x) models with ArviZ (and xarray)<a class="headerlink" href="#refitting-pystan-2-x-models-with-arviz-and-xarray" title="Permalink to this headline">¶</a></h1>
<p>ArviZ is backend agnostic and therefore does not sample directly. In order to take advantage of algorithms that require refitting models several times, ArviZ uses <a class="reference internal" href="../api/generated/arviz.SamplingWrapper.html#arviz.SamplingWrapper" title="arviz.SamplingWrapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">SamplingWrapper</span></code></a>s to convert the API of the sampling backend to a common set of functions. Hence, functions like Leave Future Out Cross Validation can be used in ArviZ independently of the sampling backend used.</p>
<p>Below there is an example of <code class="docutils literal notranslate"><span class="pre">SamplingWrapper</span></code> usage for PyStan (2.x).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">arviz</span> <span class="k">as</span> <span class="nn">az</span>
<span class="kn">import</span> <span class="nn">pystan</span>
<span class="kn">import</span> <a class="sphinx-codeautolink-a" href="https://numpy.org/doc/stable/reference/index.html#module-numpy" title="numpy"><span class="nn">numpy</span></a> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <a class="sphinx-codeautolink-a" href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.html#module-matplotlib.pyplot" title="matplotlib.pyplot"><span class="nn">matplotlib.pyplot</span></a> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <a class="sphinx-codeautolink-a" href="https://docs.scipy.org/doc/scipy/reference/reference/stats.html#module-scipy.stats" title="scipy.stats"><span class="nn">scipy.stats</span></a> <span class="k">as</span> <span class="nn">stats</span>
<span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
</pre></div>
</div>
</div>
</div>
<p>For the example, we will use a linear regression model.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><a class="sphinx-codeautolink-a" href="https://numpy.org/doc/stable/reference/random/generated/numpy.random.seed.html#numpy.random.seed" title="numpy.random.seed"><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span></a><span class="p">(</span><span class="mi">26</span><span class="p">)</span>

<span class="n">xdata</span> <span class="o">=</span> <a class="sphinx-codeautolink-a" href="https://numpy.org/doc/stable/reference/generated/numpy.linspace.html#numpy.linspace" title="numpy.linspace"><span class="n">np</span><span class="o">.</span><span class="n">linspace</span></a><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">b0</span><span class="p">,</span> <span class="n">b1</span><span class="p">,</span> <span class="n">sigma</span> <span class="o">=</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span>
<span class="n">ydata</span> <span class="o">=</span> <a class="sphinx-codeautolink-a" href="https://numpy.org/doc/stable/reference/random/generated/numpy.random.normal.html#numpy.random.normal" title="numpy.random.normal"><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span></a><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="n">b1</span> <span class="o">*</span> <span class="n">xdata</span> <span class="o">+</span> <span class="n">b0</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">sigma</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><a class="sphinx-codeautolink-a" href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.plot.html#matplotlib.pyplot.plot" title="matplotlib.pyplot.plot"><span class="n">plt</span><span class="o">.</span><span class="n">plot</span></a><span class="p">(</span><span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;matplotlib.lines.Line2D at 0x7eff3db05e80&gt;]
</pre></div>
</div>
<img alt="../_images/pystan2_refitting_xr_lik_5_1.png" src="../_images/pystan2_refitting_xr_lik_5_1.png">
</img></div>
</div>
<p>Now we will write the Stan code, keeping in mind to include only the array shapes as parameters.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">refit_lr_code</span> <span class="o">=</span> <span class="s2">"""</span>
<span class="s2">data {</span>
<span class="s2">  // Define data for fitting</span>
<span class="s2">  int&lt;lower=0&gt; N;</span>
<span class="s2">  vector[N] x;</span>
<span class="s2">  vector[N] y;</span>
<span class="s2">}</span>

<span class="s2">parameters {</span>
<span class="s2">  real b0;</span>
<span class="s2">  real b1;</span>
<span class="s2">  real&lt;lower=0&gt; sigma_e;</span>
<span class="s2">}</span>

<span class="s2">model {</span>
<span class="s2">  b0 ~ normal(0, 10);</span>
<span class="s2">  b1 ~ normal(0, 10);</span>
<span class="s2">  sigma_e ~ normal(0, 10);</span>
<span class="s2">  for (i in 1:N) {</span>
<span class="s2">    y[i] ~ normal(b0 + b1 * x[i], sigma_e);  // use only data for fitting</span>
<span class="s2">  }</span>
<span class="s2">  </span>
<span class="s2">}</span>

<span class="s2">generated quantities {</span>
<span class="s2">    vector[N] y_hat;</span>
<span class="s2">    </span>
<span class="s2">    for (i in 1:N) {</span>
<span class="s2">        // pointwise log likelihood will be calculated outside Stan, </span>
<span class="s2">        // posterior predictive however will be generated here, there are </span>
<span class="s2">        // no restrictions on adding more generated quantities</span>
<span class="s2">        y_hat[i] = normal_rng(b0 + b1 * x[i], sigma_e);</span>
<span class="s2">    }</span>
<span class="s2">}</span>
<span class="s2">"""</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sm</span> <span class="o">=</span> <span class="n">pystan</span><span class="o">.</span><span class="n">StanModel</span><span class="p">(</span><span class="n">model_code</span><span class="o">=</span><span class="n">refit_lr_code</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:pystan:COMPILING THE C++ CODE FOR MODEL anon_model_2cdc9d1f1db425bb7186f919c45c9b36 NOW.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_dict</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">"N"</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">ydata</span><span class="p">),</span>
    <span class="s2">"y"</span><span class="p">:</span> <span class="n">ydata</span><span class="p">,</span>
    <span class="s2">"x"</span><span class="p">:</span> <span class="n">xdata</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">sample_kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"iter"</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="s2">"chains"</span><span class="p">:</span> <span class="mi">4</span><span class="p">}</span>
<span class="n">fit</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">sampling</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data_dict</span><span class="p">,</span> <span class="o">**</span><span class="n">sample_kwargs</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We have defined a dictionary <code class="docutils literal notranslate"><span class="pre">sample_kwargs</span></code> that will be passed to the <code class="docutils literal notranslate"><span class="pre">SamplingWrapper</span></code> in order to make sure that all
refits use the same sampler parameters. We follow the same pattern with <a class="reference internal" href="../api/generated/arviz.from_pystan.html#arviz.from_pystan" title="arviz.from_pystan"><code class="xref py py-func docutils literal notranslate"><span class="pre">from_pystan()</span></code></a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dims</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"y"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"time"</span><span class="p">],</span> <span class="s2">"x"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"time"</span><span class="p">],</span> <span class="s2">"y_hat"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"time"</span><span class="p">]}</span>
<span class="n">idata_kwargs</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">"posterior_predictive"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"y_hat"</span><span class="p">],</span>
    <span class="s2">"observed_data"</span><span class="p">:</span> <span class="s2">"y"</span><span class="p">,</span>
    <span class="s2">"constant_data"</span><span class="p">:</span> <span class="s2">"x"</span><span class="p">,</span>
    <span class="s2">"dims"</span><span class="p">:</span> <span class="n">dims</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">idata</span> <span class="o">=</span> <a class="sphinx-codeautolink-a" href="../api/generated/arviz.from_pystan.html#arviz.from_pystan" title="arviz.from_pystan"><span class="n">az</span><span class="o">.</span><span class="n">from_pystan</span></a><span class="p">(</span><span class="n">posterior</span><span class="o">=</span><span class="n">fit</span><span class="p">,</span> <span class="o">**</span><span class="n">idata_kwargs</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We are now missing the <code class="docutils literal notranslate"><span class="pre">log_likelihood</span></code> group because we have not used the <code class="docutils literal notranslate"><span class="pre">log_likelihood</span></code> argument in <code class="docutils literal notranslate"><span class="pre">idata_kwargs</span></code>. We are doing this to ease the job of the sampling wrapper. Instead of going out of our way to get Stan to calculate the pointwise log likelihood values for each refit and for the excluded observation at every refit, we will compromise and manually write a function to calculate the pointwise log likelihood.</p>
<p>Even though it is not ideal to lose part of the straight out of the box capabilities of PyStan-ArviZ integration, this should generally not be a problem. We are basically moving the pointwise log likelihood calculation from the Stan code to the Python code, in both cases, we need to manually write the function to calculate the pointwise log likelihood.</p>
<p>Moreover, the Python computation could even be written to be compatible with <a class="reference external" href="https://docs.dask.org/en/latest/">Dask</a>. Thus it will work even in cases where the large number of observations makes it impossible to store pointwise log likelihood values (with shape <code class="docutils literal notranslate"><span class="pre">n_samples</span> <span class="pre">*</span> <span class="pre">n_observations</span></code>) in memory.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">calculate_log_lik</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">b0</span><span class="p">,</span> <span class="n">b1</span><span class="p">,</span> <span class="n">sigma_e</span><span class="p">):</span>
    <span class="n">mu</span> <span class="o">=</span> <span class="n">b0</span> <span class="o">+</span> <span class="n">b1</span> <span class="o">*</span> <span class="n">x</span>
    <span class="k">return</span> <a class="sphinx-codeautolink-a" href="https://docs.scipy.org/doc/scipy/reference/reference/generated/scipy.stats.norm.html#scipy.stats.norm" title="scipy.stats.norm"><span class="n">stats</span><span class="o">.</span><span class="n">norm</span></a><span class="p">(</span><span class="n">mu</span><span class="p">,</span> <span class="n">sigma_e</span><span class="p">)</span><span class="o">.</span><span class="n">logpdf</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>This function should work for any shape of the input arrays as long as their shapes are compatible and can broadcast. There is no need to loop over each draw in order to calculate the pointwise log likelihood using scalars.</p>
<p>Therefore, we can use <a class="reference external" href="http://xarray.pydata.org/en/stable/generated/xarray.apply_ufunc.html#xarray.apply_ufunc" title="(in xarray v0.20.2.dev0)"><code class="xref py py-func docutils literal notranslate"><span class="pre">xr.apply_ufunc</span></code></a> to handle the broadcasting and preserve the dimension names:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">log_lik</span> <span class="o">=</span> <a class="sphinx-codeautolink-a" href="http://xarray.pydata.org/en/stable/generated/xarray.apply_ufunc.html#xarray.apply_ufunc" title="xarray.apply_ufunc"><span class="n">xr</span><span class="o">.</span><span class="n">apply_ufunc</span></a><span class="p">(</span>
    <span class="n">calculate_log_lik</span><span class="p">,</span>
    <span class="n">idata</span><span class="o">.</span><span class="n">constant_data</span><span class="p">[</span><span class="s2">"x"</span><span class="p">],</span>
    <span class="n">idata</span><span class="o">.</span><span class="n">observed_data</span><span class="p">[</span><span class="s2">"y"</span><span class="p">],</span>
    <span class="n">idata</span><span class="o">.</span><span class="n">posterior</span><span class="p">[</span><span class="s2">"b0"</span><span class="p">],</span>
    <span class="n">idata</span><span class="o">.</span><span class="n">posterior</span><span class="p">[</span><span class="s2">"b1"</span><span class="p">],</span>
    <span class="n">idata</span><span class="o">.</span><span class="n">posterior</span><span class="p">[</span><span class="s2">"sigma_e"</span><span class="p">],</span>
<span class="p">)</span>
<span class="n">idata</span><span class="o">.</span><span class="n">add_groups</span><span class="p">(</span><span class="n">log_likelihood</span><span class="o">=</span><span class="n">log_lik</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The first argument is the function, followed by as many positional arguments as needed by the function, 5 in our case. As this case does not have many different dimensions nor combinations of these, we do not need to use any extra kwargs passed to <code class="docutils literal notranslate"><span class="pre">xarray.apply_ufunc</span></code>.</p>
<p>We are now passing the arguments to <code class="docutils literal notranslate"><span class="pre">calculate_log_lik</span></code> initially as <a class="reference external" href="http://xarray.pydata.org/en/stable/generated/xarray.DataArray.html#xarray.DataArray" title="(in xarray v0.20.2.dev0)"><code class="docutils literal notranslate"><span class="pre">xarray.DataArray</span></code></a>s. What is happening here behind the scenes is that <a class="reference external" href="http://xarray.pydata.org/en/stable/generated/xarray.apply_ufunc.html#xarray.apply_ufunc" title="(in xarray v0.20.2.dev0)"><code class="xref py py-func docutils literal notranslate"><span class="pre">apply_ufunc()</span></code></a> is broadcasting and aligning the dimensions of all the DataArrays involved and afterwards passing NumPy arrays to <code class="docutils literal notranslate"><span class="pre">calculate_log_lik</span></code>. Everything works automagically.</p>
<p>Now let’s see what happens if we were to pass the arrays directly to <code class="docutils literal notranslate"><span class="pre">calculate_log_lik</span></code> instead:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">calculate_log_lik</span><span class="p">(</span>
    <span class="n">idata</span><span class="o">.</span><span class="n">constant_data</span><span class="p">[</span><span class="s2">"x"</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span>
    <span class="n">idata</span><span class="o">.</span><span class="n">observed_data</span><span class="p">[</span><span class="s2">"y"</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span>
    <span class="n">idata</span><span class="o">.</span><span class="n">posterior</span><span class="p">[</span><span class="s2">"b0"</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span>
    <span class="n">idata</span><span class="o">.</span><span class="n">posterior</span><span class="p">[</span><span class="s2">"b1"</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span>
    <span class="n">idata</span><span class="o">.</span><span class="n">posterior</span><span class="p">[</span><span class="s2">"sigma_e"</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ValueError</span><span class="g g-Whitespace">                                </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="n">fc2d553bde92</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">calculate_log_lik</span><span class="p">(</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span>     <span class="n">idata</span><span class="o">.</span><span class="n">constant_data</span><span class="p">[</span><span class="s2">"x"</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span>     <span class="n">idata</span><span class="o">.</span><span class="n">observed_data</span><span class="p">[</span><span class="s2">"y"</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span>     <span class="n">idata</span><span class="o">.</span><span class="n">posterior</span><span class="p">[</span><span class="s2">"b0"</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span>     <span class="n">idata</span><span class="o">.</span><span class="n">posterior</span><span class="p">[</span><span class="s2">"b1"</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span>

<span class="nn">&lt;ipython-input-8-e6777d985e1f&gt;</span> in <span class="ni">calculate_log_lik</span><span class="nt">(x, y, b0, b1, sigma_e)</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="k">def</span> <span class="nf">calculate_log_lik</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">b0</span><span class="p">,</span> <span class="n">b1</span><span class="p">,</span> <span class="n">sigma_e</span><span class="p">):</span>
<span class="ne">----&gt; </span><span class="mi">2</span>     <span class="n">mu</span> <span class="o">=</span> <span class="n">b0</span> <span class="o">+</span> <span class="n">b1</span> <span class="o">*</span> <span class="n">x</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span>     <span class="k">return</span> <span class="n">stats</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">mu</span><span class="p">,</span> <span class="n">sigma_e</span><span class="p">)</span><span class="o">.</span><span class="n">logpdf</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

<span class="ne">ValueError</span>: operands could not be broadcast together with shapes (4,500) (100,) 
</pre></div>
</div>
</div>
</div>
<p>If you are still curious about the magic of xarray and <code class="docutils literal notranslate"><span class="pre">apply_ufunc</span></code>, you can also try to modify the <code class="docutils literal notranslate"><span class="pre">dims</span></code> used to generate the <code class="docutils literal notranslate"><span class="pre">InferenceData</span></code> a couple of cells before:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>dims = {"y": ["time"], "x": ["time"]}
</pre></div>
</div>
<p>What happens to the result if you use a different name for the dimension of <code class="docutils literal notranslate"><span class="pre">x</span></code>?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">idata</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<div>
<div class="xr-header">
<div class="xr-obj-type">arviz.InferenceData</div>
</div>
<ul class="xr-sections group-sections">
<li class="xr-section-item">
<input class="xr-section-summary-in" id="idata_posterior07fd6930-ec0d-455c-b326-e4c556a39bc7" type="checkbox"/>
<label class="xr-section-summary" for="idata_posterior07fd6930-ec0d-455c-b326-e4c556a39bc7">posterior</label>
<div class="xr-section-inline-details"></div>
<div class="xr-section-details">
<ul class="xr-var-list" id="xr-dataset-coord-list">
<div style="padding-left:2rem;"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt, dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt;
Dimensions:  (chain: 4, draw: 500)
Coordinates:
  * chain    (chain) int64 0 1 2 3
  * draw     (draw) int64 0 1 2 3 4 5 6 7 8 ... 492 493 494 495 496 497 498 499
Data variables:
    b0       (chain, draw) float64 -1.71 -3.234 -2.254 ... -1.516 -3.213 -2.435
    b1       (chain, draw) float64 1.007 1.036 1.025 1.028 ... 0.99 1.046 1.025
    sigma_e  (chain, draw) float64 3.135 3.333 2.613 2.644 ... 2.705 3.116 3.664
Attributes:
    created_at:                 2020-10-06T01:27:54.846477
    arviz_version:              0.10.0
    inference_library:          pystan
    inference_library_version:  2.19.1.1
    args:                       [{'random_seed': '345470392', 'chain_id': 0, ...
    inits:                      [[1.7126106914526407, -0.030748403931205592, ...
    step_size:                  [0.376451, 0.417677, 0.382013, 0.282232]
    metric:                     ['diag_e', 'diag_e', 'diag_e', 'diag_e']
    inv_metric:                 [[0.360859, 0.000475137, 0.00443736], [0.3487...
    adaptation_info:            ['# Adaptation terminated\n# Step size = 0.37...
    stan_code:                  \ndata {\n  // Define data for fitting\n  int...</pre><div class="xr-wrap" hidden=""><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input class="xr-section-summary-in" disabled="" id="section-4d428e75-d314-4e1b-b006-e9ce4d59a791" type="checkbox"/><label class="xr-section-summary" for="section-4d428e75-d314-4e1b-b006-e9ce4d59a791" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">chain</span>: 4</li><li><span class="xr-has-index">draw</span>: 500</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input checked="" class="xr-section-summary-in" id="section-0a0a9ed8-56f0-4c03-b39f-92fe99e0a070" type="checkbox"/><label class="xr-section-summary" for="section-0a0a9ed8-56f0-4c03-b39f-92fe99e0a070">Coordinates: <span>(2)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">chain</span></div><div class="xr-var-dims">(chain)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3</div><input class="xr-var-attrs-in" disabled="" id="attrs-1aadb901-1bca-4d3e-932b-62cae254b885" type="checkbox"/><label for="attrs-1aadb901-1bca-4d3e-932b-62cae254b885" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-2729b94f-b637-4486-9888-3124915ca118" type="checkbox"/><label for="data-2729b94f-b637-4486-9888-3124915ca118" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([0, 1, 2, 3])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">draw</span></div><div class="xr-var-dims">(draw)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 ... 495 496 497 498 499</div><input class="xr-var-attrs-in" disabled="" id="attrs-ed3de2f3-7c70-4cc9-bee9-7289caf9fa99" type="checkbox"/><label for="attrs-ed3de2f3-7c70-4cc9-bee9-7289caf9fa99" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-bf42e8ed-28cd-41ce-bec8-38b9470d08a9" type="checkbox"/><label for="data-bf42e8ed-28cd-41ce-bec8-38b9470d08a9" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([  0,   1,   2, ..., 497, 498, 499])</pre></div></li></ul></div></li><li class="xr-section-item"><input checked="" class="xr-section-summary-in" id="section-5f0d0dad-c6f3-482a-9977-ed56f836b25a" type="checkbox"/><label class="xr-section-summary" for="section-5f0d0dad-c6f3-482a-9977-ed56f836b25a">Data variables: <span>(3)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>b0</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-1.71 -3.234 ... -3.213 -2.435</div><input class="xr-var-attrs-in" disabled="" id="attrs-3b4fb4c2-808c-4a7d-94f1-7c870099bd09" type="checkbox"/><label for="attrs-3b4fb4c2-808c-4a7d-94f1-7c870099bd09" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-fe860254-a3ce-4354-8135-f23c47140ba9" type="checkbox"/><label for="data-fe860254-a3ce-4354-8135-f23c47140ba9" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[-1.70976257, -3.23425216, -2.25351782, ..., -2.56913775,
        -2.08880786, -1.89536428],
       [-2.80265651, -2.75145537, -2.19537235, ..., -2.50119745,
        -2.4800164 , -2.67361341],
       [-2.76579393, -2.76807446, -1.55760542, ..., -1.53763999,
        -1.71889824, -2.52665986],
       [-1.9179084 , -1.90488131, -3.21904738, ..., -1.51565781,
        -3.21331217, -2.43539996]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>b1</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">1.007 1.036 1.025 ... 1.046 1.025</div><input class="xr-var-attrs-in" disabled="" id="attrs-5d2ac0a1-b2a6-4fd2-9e44-a76af1944914" type="checkbox"/><label for="attrs-5d2ac0a1-b2a6-4fd2-9e44-a76af1944914" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-8d88f3a0-cc19-41c9-b0e2-84bc6d765811" type="checkbox"/><label for="data-8d88f3a0-cc19-41c9-b0e2-84bc6d765811" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[1.00722956, 1.03629913, 1.02533173, ..., 1.02414785, 1.00990258,
        1.00257576],
       [1.02843502, 1.01101049, 1.02637939, ..., 1.0221316 , 1.03456897,
        1.03830894],
       [1.03302425, 1.03091501, 0.98509302, ..., 0.98669291, 0.97865203,
        1.04242641],
       [0.9949438 , 1.00678403, 1.04593325, ..., 0.98998275, 1.04561366,
        1.02479964]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>sigma_e</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">3.135 3.333 2.613 ... 3.116 3.664</div><input class="xr-var-attrs-in" disabled="" id="attrs-8347eebf-bbbb-475b-a81e-090705dd448b" type="checkbox"/><label for="attrs-8347eebf-bbbb-475b-a81e-090705dd448b" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-151a4585-1602-46c2-97d9-311cb6749cdd" type="checkbox"/><label for="data-151a4585-1602-46c2-97d9-311cb6749cdd" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[3.13518404, 3.33292261, 2.61334128, ..., 2.75948526, 2.51749634,
        3.02298999],
       [2.91211116, 3.00750097, 2.6990428 , ..., 2.73295424, 2.7586741 ,
        2.69014456],
       [2.61478251, 2.58839126, 2.96722067, ..., 3.01217268, 3.09647796,
        2.90083022],
       [3.19894428, 3.17015489, 2.79776047, ..., 2.70463523, 3.11588558,
        3.66370081]])</pre></div></li></ul></div></li><li class="xr-section-item"><input class="xr-section-summary-in" id="section-b542d8bc-f1a8-498e-8dad-adc0c3191e97" type="checkbox"/><label class="xr-section-summary" for="section-b542d8bc-f1a8-498e-8dad-adc0c3191e97">Attributes: <span>(11)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>created_at :</span></dt><dd>2020-10-06T01:27:54.846477</dd><dt><span>arviz_version :</span></dt><dd>0.10.0</dd><dt><span>inference_library :</span></dt><dd>pystan</dd><dt><span>inference_library_version :</span></dt><dd>2.19.1.1</dd><dt><span>args :</span></dt><dd>[{'random_seed': '345470392', 'chain_id': 0, 'init': 'random', 'init_radius': 2.0, 'enable_random_init': False, 'append_samples': False, 'method': 'SAMPLING', 'iter': 1000, 'warmup': 500, 'thin': 1, 'refresh': 100, 'test_grad': False, 'sampler_t': 'NUTS', 'control': {'adapt_engaged': True, 'adapt_gamma': 0.05, 'adapt_delta': 0.8, 'adapt_kappa': 0.75, 'adapt_init_buffer': 75, 'adapt_term_buffer': 50, 'adapt_window': 25, 'adapt_t0': 10.0, 'stepsize': 1.0, 'stepsize_jitter': 0.0}}, {'random_seed': '345470392', 'chain_id': 1, 'init': 'random', 'init_radius': 2.0, 'enable_random_init': False, 'append_samples': False, 'method': 'SAMPLING', 'iter': 1000, 'warmup': 500, 'thin': 1, 'refresh': 100, 'test_grad': False, 'sampler_t': 'NUTS', 'control': {'adapt_engaged': True, 'adapt_gamma': 0.05, 'adapt_delta': 0.8, 'adapt_kappa': 0.75, 'adapt_init_buffer': 75, 'adapt_term_buffer': 50, 'adapt_window': 25, 'adapt_t0': 10.0, 'stepsize': 1.0, 'stepsize_jitter': 0.0}}, {'random_seed': '345470392', 'chain_id': 2, 'init': 'random', 'init_radius': 2.0, 'enable_random_init': False, 'append_samples': False, 'method': 'SAMPLING', 'iter': 1000, 'warmup': 500, 'thin': 1, 'refresh': 100, 'test_grad': False, 'sampler_t': 'NUTS', 'control': {'adapt_engaged': True, 'adapt_gamma': 0.05, 'adapt_delta': 0.8, 'adapt_kappa': 0.75, 'adapt_init_buffer': 75, 'adapt_term_buffer': 50, 'adapt_window': 25, 'adapt_t0': 10.0, 'stepsize': 1.0, 'stepsize_jitter': 0.0}}, {'random_seed': '345470392', 'chain_id': 3, 'init': 'random', 'init_radius': 2.0, 'enable_random_init': False, 'append_samples': False, 'method': 'SAMPLING', 'iter': 1000, 'warmup': 500, 'thin': 1, 'refresh': 100, 'test_grad': False, 'sampler_t': 'NUTS', 'control': {'adapt_engaged': True, 'adapt_gamma': 0.05, 'adapt_delta': 0.8, 'adapt_kappa': 0.75, 'adapt_init_buffer': 75, 'adapt_term_buffer': 50, 'adapt_window': 25, 'adapt_t0': 10.0, 'stepsize': 1.0, 'stepsize_jitter': 0.0}}]</dd><dt><span>inits :</span></dt><dd>[[1.7126106914526407, -0.030748403931205592, 0.22247692354028922, 1.563010620085344, 1.736125399192665, 1.747477672816779, 1.3619421724977934, 1.862291818270751, 1.823006344878086, 1.9510697680488691, 1.7802003879055686, 1.9723026966582544, 1.5794589603977573, 1.423259411648393, 1.1533007326197822, 1.665203635965765, 1.2206841139058222, 1.5134883035255693, 1.7157023710552108, 0.9881839736406081, 1.069917520625811, 1.6653581146389125, 1.409099714503847, 1.4401322196838116, 1.6619755510164553, 1.4123525809413187, 1.230305712619689, 0.9892577439052912, 1.1956685234367415, 1.290803397086368, 1.6556721281980755, 1.0359510222207802, 1.439786579369818, 1.1183112282535932, 1.7343475002773099, 1.1046589804210964, 1.2283133412643932, 1.3207407493167025, 1.218904874415506, 1.1003995539499523, 0.9975735945253834, 1.350742576917557, 1.2532881850639583, 1.1823273075743246, 1.1012409075612908, 1.2628103800322803, 1.0147299582505995, 0.8589847106505416, 0.8898727253796739, 0.9782458546698332, 1.2665383438938882, 1.228723618730904, 0.5637394005411227, 0.7582721484070517, 1.0776734106206127, 0.7136245342532639, 0.9501103607543755, 1.237519347530787, 1.0065130041924768, 0.6463745867889956, 0.9206908332482945, 0.7868266683971612, 0.9435344545136928, 0.7803438724119967, 1.0043123973930805, 0.7690345998354766, 0.8673992960057956, 0.5130348495323778, 0.9577832508776849, 0.8487364496512848, 0.56420484463849, 0.3808267388243632, 0.8432494355018948, 0.7778493238482694, 0.4678642119028372, 0.94579232925843, 0.40229430763676355, 0.6920895344930726, 0.5109142229354574, 0.33922752258717415, 0.31074683835556594, 0.25225379978818274, 0.689448177734008, 0.684476788564254, 0.2715522715334655, 0.4946368245978605, 0.9866808184224851, 0.4169624690140418, 0.6718100078505944, 0.5023736247617323, 0.6529272673144919, 0.15714348325402075, 0.5642690591022588, 0.3123409660119498, 0.5021046802979686, 0.12687982165999667, -0.08504371711810915, 0.20288571183597803, 0.31733394346830934, 0.11187690328850451, -0.3845369228583567, 0.30810916044917214, 0.39284771909908267], [-1.1134838907791371, -1.1238437558759764, 0.9262276644304522, -1.0001364048783417, -2.782522071985624, -3.7351937289534938, -2.83382509828959, -3.9792167629245547, -5.325575986287659, -3.9719222630911326, -4.9701162633268146, -4.889873484536508, -8.098215724972203, -6.243735913970589, -6.789380005195758, -8.584457382718497, -7.914841940120913, -10.035717691640423, -9.846791491398221, -10.640525911555425, -10.449218679505659, -10.172584281939635, -12.019409036276185, -13.549679369471825, -13.164603583641847, -12.383514257856618, -13.782400280097933, -16.546919393640355, -15.30576145363258, -14.948107811268722, -14.70816502361977, -15.127552271660006, -17.832674554385495, -16.775446861311107, -18.661588011977177, -18.36835186425152, -20.394695344524703, -21.439750398706323, -20.389732246228064, -22.17381654540745, -22.641342007687257, -21.621532944156733, -23.751810424861787, -24.9088896091435, -24.44293953585543, -23.331151799198576, -25.799087598211663, -25.72683651993046, -25.48519331614153, -27.093526224961874, -27.007351803525772, -27.701731039425788, -28.554065742695233, -29.48530243664214, -28.855743050674327, -30.933087043072334, -31.680025416945885, -30.820205556693764, -33.27033854652422, -33.47350243177385, -34.186533699921384, -33.16471915066973, -35.323053269050135, -35.03193254130218, -35.49445872914028, -35.91028138752765, -37.55910680289756, -37.15440219323971, -38.86861034335689, -38.54267862730015, -39.8214291646721, -40.0671002094611, -41.08407230470809, -39.88130992708778, -42.14392256076823, -42.646971743334106, -44.230222897142525, -43.459515365024444, -44.63644938096393, -44.68353023478125, -43.33238239646698, -44.386574144691686, -47.47950487798273, -47.11019966930678, -45.64532647072011, -47.29140500752328, -47.8741527359583, -46.830155827750204, -49.97442249976532, -48.90904201933886, -48.687968198431754, -50.54786356802271, -53.90826980794699, -50.80527241272121, -51.467416347151236, -54.79437858746194, -53.13239027349298, -55.006846225468095, -54.82657088035839, -55.907371006058746, -56.79163455597591, -56.53305517174383, -56.40714707088171], [0.7591034533841987, 1.9826051995642704, 0.16793431858092658, 0.805312735131347, 1.6118763010848847, 2.946838444483057, 3.986470083405372, 4.662304025186486, 5.663232521610033, 6.47764386550193, 8.063336371592063, 8.973610823364023, 9.683577887532342, 10.777672929044504, 11.483516345441842, 12.669825782382464, 13.81617825420758, 14.727078095609041, 15.653286560423263, 16.85465470427706, 17.987686798235003, 18.441188207454093, 19.75095010792246, 20.9754254345274, 21.85535971129151, 22.533179271441444, 23.50227798608833, 25.00778874809557, 25.614353580458648, 27.172987133980325, 27.658779705317993, 28.954196590003786, 30.15981298135688, 30.463482542940092, 31.689433708885595, 32.524210496649246, 33.749313054299236, 34.83697661146893, 35.751436298022114, 36.60985428849034, 37.66136044211557, 38.55513192121144, 39.75641664041576, 40.969800417605995, 41.914429503403355, 42.793784152363386, 43.72267631681878, 44.881413319736005, 45.78253954987451, 47.03942682509191, 47.95070882098185, 48.80238646913053, 49.95797756092825, 50.80882028984611, 51.8271754072294, 52.588018832719314, 54.10576353161209, 54.95576050804802, 55.89297305055758, 56.93988171758835, 58.02306474601656, 58.77058441411522, 60.16084890417911, 60.777300374837594, 61.91383765149841, 62.767107949227004, 63.944942003216745, 64.73034265551848, 65.87382466221956, 66.6603136060696, 67.73754512574801, 69.16076749335465, 69.8769846512889, 70.7057558927324, 71.68907293809872, 72.94513751725212, 73.82240665566322, 74.80419979945611, 75.72663080825859, 76.83568810191117, 78.08416880540659, 78.66852993263308, 79.56930634230059, 80.90007304107715, 81.78419498059216, 82.95122544359755, 84.0829806921834, 85.08294160279907, 85.76766354702576, 86.86449445647895, 87.65391529214156, 88.92242615016434, 89.52614263110287, 90.89244320699623, 91.86356426165837, 92.94479767697617, 93.90322653999661, 94.91265847220282, 95.91238715716095, 96.80811913044283, 97.73116607328464, 98.94966159285758, 99.87780404837258], [0.15253633126529165, -0.36145359607646665, 2.9280508124252953, 0.44250791094032554, -3.6799518142844327, -2.637575384337925, 3.119163033609511, -5.903861852643543, -2.4637571292352485, -4.816611487752867, -0.0077577799217010135, -5.0189534846237605, -1.8634726123276462, -7.709913469136537, -1.5653880871383996, 2.28507271712304, 1.0967970812627015, -4.334732711225383, -2.360323504043661, -0.39052505975241747, -5.616006050348081, -1.4596375055706772, -2.69918271254674, 0.9850547221829933, -1.2274417251958054, -5.560564712256568, -7.5781701998946165, -2.428212736177295, -4.857753561980811, -2.0866409143312015, -7.691703594910914, -4.218549670102667, -10.925917855564652, -8.81457774471066, -6.350847179057185, -5.868837216402981, -0.31264571876556335, -9.164780377262067, -5.120628415520505, -9.278690325085478, -10.99975092471847, -5.957421945498301, -5.224847538211541, -5.591515757241417, -8.243928421143757, -2.0404183877048476, -5.084809273978762, -9.757553467949597, -9.63713618833015, -7.866345955920552, -13.292801501220811, -8.026299189765593, -12.22354699393636, -8.06460770280281, -11.70071071659354, -9.60974123905669, -5.95337086054841, -7.032222067826643, -10.075801891488775, -11.180074524884002, -16.74247715518144, -10.661417484399925, -8.879564959344641, -11.329560330559646, -6.365956064783927, -12.107391549879763, -8.917615099302498, -8.58178416233676, -9.0983027670198, -16.252306312272093, -14.010782067805266, -14.997204857624105, -12.531442981775685, -17.467706632832485, -9.682956913321522, -15.941717677222895, -12.981704646961063, -15.907159314915198, -12.057734353093792, -9.604060313033159, -14.966573074038134, -18.42544143538557, -13.595692084709363, -13.676939354896357, -15.83130940868651, -16.91040917415477, -17.010379505766938, -17.573009441087734, -15.007376906661394, -17.692655622589996, -14.476798257946067, -17.838639229747464, -14.25081695011485, -18.05170466422207, -17.966436001117373, -11.091651588821101, -17.31954264519986, -22.554457294516784, -17.64570979361735, -19.822745317065376, -16.65596740508466, -19.8783069256713, -16.612644786945985]]</dd><dt><span>step_size :</span></dt><dd>[0.376451, 0.417677, 0.382013, 0.282232]</dd><dt><span>metric :</span></dt><dd>['diag_e', 'diag_e', 'diag_e', 'diag_e']</dd><dt><span>inv_metric :</span></dt><dd>[[0.360859, 0.000475137, 0.00443736], [0.34879, 0.000404285, 0.00467239], [0.280667, 0.000337829, 0.00543657], [0.425118, 0.000556571, 0.00522525]]</dd><dt><span>adaptation_info :</span></dt><dd>['# Adaptation terminated\n# Step size = 0.376451\n# Diagonal elements of inverse mass matrix:\n# 0.360859, 0.000475137, 0.00443736\n', '# Adaptation terminated\n# Step size = 0.417677\n# Diagonal elements of inverse mass matrix:\n# 0.34879, 0.000404285, 0.00467239\n', '# Adaptation terminated\n# Step size = 0.382013\n# Diagonal elements of inverse mass matrix:\n# 0.280667, 0.000337829, 0.00543657\n', '# Adaptation terminated\n# Step size = 0.282232\n# Diagonal elements of inverse mass matrix:\n# 0.425118, 0.000556571, 0.00522525\n']</dd><dt><span>stan_code :</span></dt><dd>
data {
  // Define data for fitting
  int&lt;lower=0&gt; N;
  vector[N] x;
  vector[N] y;
}

parameters {
  real b0;
  real b1;
  real&lt;lower=0&gt; sigma_e;
}

model {
  b0 ~ normal(0, 10);
  b1 ~ normal(0, 10);
  sigma_e ~ normal(0, 10);
  for (i in 1:N) {
    y[i] ~ normal(b0 + b1 * x[i], sigma_e);  // use only data for fitting
  }

}

generated quantities {
    vector[N] y_hat;

    for (i in 1:N) {
        // pointwise log likelihood will be calculated outside stan, 
        // posterior predictive however will be generated here, there are 
        // no restrictions on adding more generated quantities
        y_hat[i] = normal_rng(b0 + b1 * x[i], sigma_e);
    }
}
</dd></dl></div></li></ul></div></div><br/></div>
</ul>
</div>
</li>
<li class="xr-section-item">
<input class="xr-section-summary-in" id="idata_posterior_predictivef4dc6780-7217-4eb0-b553-d6e6be8e25e7" type="checkbox"/>
<label class="xr-section-summary" for="idata_posterior_predictivef4dc6780-7217-4eb0-b553-d6e6be8e25e7">posterior_predictive</label>
<div class="xr-section-inline-details"></div>
<div class="xr-section-details">
<ul class="xr-var-list" id="xr-dataset-coord-list">
<div style="padding-left:2rem;"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt, dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt;
Dimensions:  (chain: 4, draw: 500, time: 100)
Coordinates:
  * chain    (chain) int64 0 1 2 3
  * draw     (draw) int64 0 1 2 3 4 5 6 7 8 ... 492 493 494 495 496 497 498 499
  * time     (time) int64 0 1 2 3 4 5 6 7 8 9 ... 90 91 92 93 94 95 96 97 98 99
Data variables:
    y_hat    (chain, draw, time) float64 -6.143 3.58 -2.542 ... 50.53 52.38
Attributes:
    created_at:                 2020-10-06T01:27:54.856579
    arviz_version:              0.10.0
    inference_library:          pystan
    inference_library_version:  2.19.1.1</pre><div class="xr-wrap" hidden=""><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input class="xr-section-summary-in" disabled="" id="section-f10f1607-86a7-4087-af29-3bdd4cb2e2a5" type="checkbox"/><label class="xr-section-summary" for="section-f10f1607-86a7-4087-af29-3bdd4cb2e2a5" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">chain</span>: 4</li><li><span class="xr-has-index">draw</span>: 500</li><li><span class="xr-has-index">time</span>: 100</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input checked="" class="xr-section-summary-in" id="section-db2807fa-e16b-47b2-96e8-7831a2725a46" type="checkbox"/><label class="xr-section-summary" for="section-db2807fa-e16b-47b2-96e8-7831a2725a46">Coordinates: <span>(3)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">chain</span></div><div class="xr-var-dims">(chain)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3</div><input class="xr-var-attrs-in" disabled="" id="attrs-b6edc12d-3e32-4d44-b7cf-95cf3ff2b9b8" type="checkbox"/><label for="attrs-b6edc12d-3e32-4d44-b7cf-95cf3ff2b9b8" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-2b08e57c-b6f0-4560-9909-5a4f0ad445ff" type="checkbox"/><label for="data-2b08e57c-b6f0-4560-9909-5a4f0ad445ff" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([0, 1, 2, 3])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">draw</span></div><div class="xr-var-dims">(draw)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 ... 495 496 497 498 499</div><input class="xr-var-attrs-in" disabled="" id="attrs-66d8a76c-9733-475a-a15c-93f46e5dd704" type="checkbox"/><label for="attrs-66d8a76c-9733-475a-a15c-93f46e5dd704" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-6d89f517-a935-47ef-be55-0bc783136dd8" type="checkbox"/><label for="data-6d89f517-a935-47ef-be55-0bc783136dd8" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([  0,   1,   2, ..., 497, 498, 499])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">time</span></div><div class="xr-var-dims">(time)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 6 ... 94 95 96 97 98 99</div><input class="xr-var-attrs-in" disabled="" id="attrs-70f7f355-f419-4c36-9d6e-02da5cdf4ca3" type="checkbox"/><label for="attrs-70f7f355-f419-4c36-9d6e-02da5cdf4ca3" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-f6fab1ae-2e0c-4b4d-b05d-4c62ee316178" type="checkbox"/><label for="data-f6fab1ae-2e0c-4b4d-b05d-4c62ee316178" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,
       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,
       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53,
       54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71,
       72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89,
       90, 91, 92, 93, 94, 95, 96, 97, 98, 99])</pre></div></li></ul></div></li><li class="xr-section-item"><input checked="" class="xr-section-summary-in" id="section-906c222f-5710-4143-8dad-d1758c728685" type="checkbox"/><label class="xr-section-summary" for="section-906c222f-5710-4143-8dad-d1758c728685">Data variables: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>y_hat</span></div><div class="xr-var-dims">(chain, draw, time)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-6.143 3.58 -2.542 ... 50.53 52.38</div><input class="xr-var-attrs-in" disabled="" id="attrs-1f776cf5-bca3-4da3-95f7-417f7359a566" type="checkbox"/><label for="attrs-1f776cf5-bca3-4da3-95f7-417f7359a566" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-a9ac2e27-7e4d-4080-a4c2-ebb111e940b5" type="checkbox"/><label for="data-a9ac2e27-7e4d-4080-a4c2-ebb111e940b5" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[-6.14324716,  3.57962417, -2.54207984, ..., 44.80279953,
         52.17649124, 46.30120482],
        [-2.35686662, -5.589217  , -0.36932621, ..., 41.00136624,
         48.08109852, 46.33960453],
        [-1.66857314, -1.74229818,  1.77193804, ..., 49.12058088,
         47.91325588, 49.82294993],
        ...,
        [-5.09563187, -3.88868228, -0.40436719, ..., 47.2786351 ,
         45.9107155 , 49.63458312],
        [-4.33567606, -1.35079225,  0.93241619, ..., 43.8019844 ,
         52.00584094, 50.67218395],
        [-3.33230934, -1.92816671,  4.29220822, ..., 46.937629  ,
         48.17816884, 48.07725946]],

       [[ 3.3925083 ,  3.29887865, -4.26851217, ..., 48.04336146,
         47.67624246, 49.86028495],
        [-4.08820847, -4.8530133 , -2.61032323, ..., 47.11625882,
         48.06495934, 49.81138569],
        [-1.02823027, -3.15138034,  0.49948274, ..., 49.5596293 ,
         49.29807624, 50.37768098],
...
        [ 6.99634784, -3.99291677, -1.69006997, ..., 38.37266713,
         45.88751643, 47.62275585],
        [ 1.12457707, -4.5825232 ,  5.08083248, ..., 49.50040743,
         47.97067205, 45.40190614],
        [-2.9970034 , -3.09521293, -2.44704281, ..., 48.1932144 ,
         50.14285014, 46.37605659]],

       [[-4.56410819, -3.1154288 ,  0.72723618, ..., 45.02077023,
         45.83328218, 52.53996288],
        [-5.28682627, -2.21783154,  0.91731377, ..., 47.56635459,
         41.44493902, 47.95766167],
        [-4.18208721, -2.10287726, -2.38028365, ..., 41.44783494,
         50.07066811, 50.47616347],
        ...,
        [ 1.50073219, -2.13533975, -3.55674687, ..., 50.63988104,
         47.53302654, 46.90014858],
        [-2.50882429, -2.88749118, -2.35065312, ..., 50.75031412,
         45.17683213, 55.36951043],
        [-6.21022215,  0.56425813,  2.95538064, ..., 44.45020634,
         50.52837543, 52.38130319]]])</pre></div></li></ul></div></li><li class="xr-section-item"><input checked="" class="xr-section-summary-in" id="section-b3839dad-eb5a-4997-bb77-93d56740878d" type="checkbox"/><label class="xr-section-summary" for="section-b3839dad-eb5a-4997-bb77-93d56740878d">Attributes: <span>(4)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>created_at :</span></dt><dd>2020-10-06T01:27:54.856579</dd><dt><span>arviz_version :</span></dt><dd>0.10.0</dd><dt><span>inference_library :</span></dt><dd>pystan</dd><dt><span>inference_library_version :</span></dt><dd>2.19.1.1</dd></dl></div></li></ul></div></div><br/></div>
</ul>
</div>
</li>
<li class="xr-section-item">
<input class="xr-section-summary-in" id="idata_sample_stats36038387-4943-4b51-b2b8-6321c9276fbe" type="checkbox"/>
<label class="xr-section-summary" for="idata_sample_stats36038387-4943-4b51-b2b8-6321c9276fbe">sample_stats</label>
<div class="xr-section-inline-details"></div>
<div class="xr-section-details">
<ul class="xr-var-list" id="xr-dataset-coord-list">
<div style="padding-left:2rem;"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt, dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt;
Dimensions:      (chain: 4, draw: 500)
Coordinates:
  * chain        (chain) int64 0 1 2 3
  * draw         (draw) int64 0 1 2 3 4 5 6 7 ... 493 494 495 496 497 498 499
Data variables:
    accept_stat  (chain, draw) float64 0.9181 0.9607 0.9892 ... 0.9131 0.8482
    stepsize     (chain, draw) float64 0.3765 0.3765 0.3765 ... 0.2822 0.2822
    treedepth    (chain, draw) int64 3 3 4 3 2 1 3 4 4 3 ... 1 3 2 3 3 4 4 1 4 4
    n_leapfrog   (chain, draw) int64 7 11 15 15 3 3 7 15 ... 11 7 15 15 3 15 15
    diverging    (chain, draw) bool False False False ... False False False
    energy       (chain, draw) float64 159.8 160.4 160.1 ... 156.7 157.6 162.1
    lp           (chain, draw) float64 -156.2 -157.9 -156.6 ... -156.5 -159.7
Attributes:
    created_at:                 2020-10-06T01:27:54.851944
    arviz_version:              0.10.0
    inference_library:          pystan
    inference_library_version:  2.19.1.1
    args:                       [{'random_seed': '345470392', 'chain_id': 0, ...
    inits:                      [[1.7126106914526407, -0.030748403931205592, ...
    step_size:                  [0.376451, 0.417677, 0.382013, 0.282232]
    metric:                     ['diag_e', 'diag_e', 'diag_e', 'diag_e']
    inv_metric:                 [[0.360859, 0.000475137, 0.00443736], [0.3487...
    adaptation_info:            ['# Adaptation terminated\n# Step size = 0.37...
    stan_code:                  \ndata {\n  // Define data for fitting\n  int...</pre><div class="xr-wrap" hidden=""><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input class="xr-section-summary-in" disabled="" id="section-1b485bb8-290f-4e7e-b100-383ebfbe0b8e" type="checkbox"/><label class="xr-section-summary" for="section-1b485bb8-290f-4e7e-b100-383ebfbe0b8e" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">chain</span>: 4</li><li><span class="xr-has-index">draw</span>: 500</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input checked="" class="xr-section-summary-in" id="section-c4bce281-f0b6-4e51-9951-55bb220ac77d" type="checkbox"/><label class="xr-section-summary" for="section-c4bce281-f0b6-4e51-9951-55bb220ac77d">Coordinates: <span>(2)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">chain</span></div><div class="xr-var-dims">(chain)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3</div><input class="xr-var-attrs-in" disabled="" id="attrs-e2289ea7-7acc-4fd0-aff9-939ec2e4edf0" type="checkbox"/><label for="attrs-e2289ea7-7acc-4fd0-aff9-939ec2e4edf0" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-8ebb1648-89ec-4a11-a33d-091d30f65e91" type="checkbox"/><label for="data-8ebb1648-89ec-4a11-a33d-091d30f65e91" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([0, 1, 2, 3])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">draw</span></div><div class="xr-var-dims">(draw)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 ... 495 496 497 498 499</div><input class="xr-var-attrs-in" disabled="" id="attrs-049d24a3-c00e-4b60-b247-57dad89b87af" type="checkbox"/><label for="attrs-049d24a3-c00e-4b60-b247-57dad89b87af" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-eb465022-1eb4-41b9-b667-4b5a9bc047d9" type="checkbox"/><label for="data-eb465022-1eb4-41b9-b667-4b5a9bc047d9" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([  0,   1,   2, ..., 497, 498, 499])</pre></div></li></ul></div></li><li class="xr-section-item"><input checked="" class="xr-section-summary-in" id="section-f5b424e7-924f-4b25-9da9-97c83f5925cc" type="checkbox"/><label class="xr-section-summary" for="section-f5b424e7-924f-4b25-9da9-97c83f5925cc">Data variables: <span>(7)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>accept_stat</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.9181 0.9607 ... 0.9131 0.8482</div><input class="xr-var-attrs-in" disabled="" id="attrs-45d66003-dfc7-4210-898a-bc831d00efc5" type="checkbox"/><label for="attrs-45d66003-dfc7-4210-898a-bc831d00efc5" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-2dddb70c-b4a8-4e2d-a0b7-3e9f4b26d4fd" type="checkbox"/><label for="data-2dddb70c-b4a8-4e2d-a0b7-3e9f4b26d4fd" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[0.91812179, 0.96067939, 0.98916694, ..., 0.90434277, 0.96825801,
        0.99901529],
       [0.97601426, 0.28979372, 1.        , ..., 0.96886751, 0.8477975 ,
        0.97603435],
       [0.70064989, 0.9978169 , 0.96396176, ..., 0.99683543, 0.79800424,
        0.98639612],
       [0.95074447, 0.99994436, 0.99786912, ..., 0.98993924, 0.91313736,
        0.84818474]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>stepsize</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.3765 0.3765 ... 0.2822 0.2822</div><input class="xr-var-attrs-in" disabled="" id="attrs-74f7f3af-4d24-408b-8b81-4e0bf8f14d88" type="checkbox"/><label for="attrs-74f7f3af-4d24-408b-8b81-4e0bf8f14d88" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-101c5dab-b986-4387-b033-2ae672750c51" type="checkbox"/><label for="data-101c5dab-b986-4387-b033-2ae672750c51" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[0.37645063, 0.37645063, 0.37645063, ..., 0.37645063, 0.37645063,
        0.37645063],
       [0.41767651, 0.41767651, 0.41767651, ..., 0.41767651, 0.41767651,
        0.41767651],
       [0.38201258, 0.38201258, 0.38201258, ..., 0.38201258, 0.38201258,
        0.38201258],
       [0.28223165, 0.28223165, 0.28223165, ..., 0.28223165, 0.28223165,
        0.28223165]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>treedepth</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">3 3 4 3 2 1 3 4 ... 2 3 3 4 4 1 4 4</div><input class="xr-var-attrs-in" disabled="" id="attrs-1a6a9666-0b33-485a-b8a5-a6d2024c278a" type="checkbox"/><label for="attrs-1a6a9666-0b33-485a-b8a5-a6d2024c278a" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-a94420ce-903a-4a95-b106-27b644d12adc" type="checkbox"/><label for="data-a94420ce-903a-4a95-b106-27b644d12adc" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[3, 3, 4, ..., 3, 3, 3],
       [2, 2, 2, ..., 2, 4, 1],
       [2, 3, 3, ..., 3, 2, 4],
       [3, 3, 4, ..., 1, 4, 4]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>n_leapfrog</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">7 11 15 15 3 3 ... 7 15 15 3 15 15</div><input class="xr-var-attrs-in" disabled="" id="attrs-d8da7597-abc7-484e-b1f5-25c6e340c239" type="checkbox"/><label for="attrs-d8da7597-abc7-484e-b1f5-25c6e340c239" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-7397cc10-d6c4-4b70-ba0e-384f57f0eda2" type="checkbox"/><label for="data-7397cc10-d6c4-4b70-ba0e-384f57f0eda2" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[ 7, 11, 15, ..., 11,  7,  7],
       [ 3,  3,  7, ...,  3, 15,  3],
       [ 3,  7, 15, ..., 15,  3, 15],
       [ 7,  7, 15, ...,  3, 15, 15]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>diverging</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">bool</div><div class="xr-var-preview xr-preview">False False False ... False False</div><input class="xr-var-attrs-in" disabled="" id="attrs-e656f1e9-3e27-4e9d-be3d-7244c5bf308c" type="checkbox"/><label for="attrs-e656f1e9-3e27-4e9d-be3d-7244c5bf308c" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-dc804446-08bd-46b3-9046-f304447eae38" type="checkbox"/><label for="data-dc804446-08bd-46b3-9046-f304447eae38" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[False, False, False, ..., False, False, False],
       [False, False, False, ..., False, False, False],
       [False, False, False, ..., False, False, False],
       [False, False, False, ..., False, False, False]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>energy</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">159.8 160.4 160.1 ... 157.6 162.1</div><input class="xr-var-attrs-in" disabled="" id="attrs-496d3f73-ae10-4483-9491-993b2e0ec9ae" type="checkbox"/><label for="attrs-496d3f73-ae10-4483-9491-993b2e0ec9ae" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-3c37793b-a881-4a49-a3bc-f79a83d3bc15" type="checkbox"/><label for="data-3c37793b-a881-4a49-a3bc-f79a83d3bc15" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[159.77452278, 160.39501628, 160.07809243, ..., 156.59300635,
        157.4439019 , 157.54976232],
       [155.82344174, 160.46219142, 157.56073606, ..., 155.50982852,
        156.62434929, 157.10646235],
       [158.98498532, 156.65856438, 159.15846073, ..., 157.18681133,
        157.89767293, 158.39235644],
       [163.19043666, 156.76008373, 157.04852783, ..., 156.69939028,
        157.60374161, 162.11484674]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>lp</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-156.2 -157.9 ... -156.5 -159.7</div><input class="xr-var-attrs-in" disabled="" id="attrs-346007d6-6f35-492b-bc3a-6cdbe767ff14" type="checkbox"/><label for="attrs-346007d6-6f35-492b-bc3a-6cdbe767ff14" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-782eaf92-cc67-46e0-b1f8-cd6d403fe97e" type="checkbox"/><label for="data-782eaf92-cc67-46e0-b1f8-cd6d403fe97e" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[-156.21111326, -157.88066104, -156.62156933, ..., -155.20137833,
        -157.07660797, -155.27960499],
       [-155.26793518, -156.92001921, -156.36895333, ..., -155.25730088,
        -156.03898312, -156.3164537 ],
       [-156.3873743 , -156.59553119, -156.11815325, ..., -156.05395265,
        -157.5559844 , -156.76946534],
       [-156.37672426, -155.84329924, -156.34586725, ..., -156.47280077,
        -156.46022752, -159.65714163]])</pre></div></li></ul></div></li><li class="xr-section-item"><input class="xr-section-summary-in" id="section-7ded3889-2a31-453c-802e-0c8b60f0af89" type="checkbox"/><label class="xr-section-summary" for="section-7ded3889-2a31-453c-802e-0c8b60f0af89">Attributes: <span>(11)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>created_at :</span></dt><dd>2020-10-06T01:27:54.851944</dd><dt><span>arviz_version :</span></dt><dd>0.10.0</dd><dt><span>inference_library :</span></dt><dd>pystan</dd><dt><span>inference_library_version :</span></dt><dd>2.19.1.1</dd><dt><span>args :</span></dt><dd>[{'random_seed': '345470392', 'chain_id': 0, 'init': 'random', 'init_radius': 2.0, 'enable_random_init': False, 'append_samples': False, 'method': 'SAMPLING', 'iter': 1000, 'warmup': 500, 'thin': 1, 'refresh': 100, 'test_grad': False, 'sampler_t': 'NUTS', 'control': {'adapt_engaged': True, 'adapt_gamma': 0.05, 'adapt_delta': 0.8, 'adapt_kappa': 0.75, 'adapt_init_buffer': 75, 'adapt_term_buffer': 50, 'adapt_window': 25, 'adapt_t0': 10.0, 'stepsize': 1.0, 'stepsize_jitter': 0.0}}, {'random_seed': '345470392', 'chain_id': 1, 'init': 'random', 'init_radius': 2.0, 'enable_random_init': False, 'append_samples': False, 'method': 'SAMPLING', 'iter': 1000, 'warmup': 500, 'thin': 1, 'refresh': 100, 'test_grad': False, 'sampler_t': 'NUTS', 'control': {'adapt_engaged': True, 'adapt_gamma': 0.05, 'adapt_delta': 0.8, 'adapt_kappa': 0.75, 'adapt_init_buffer': 75, 'adapt_term_buffer': 50, 'adapt_window': 25, 'adapt_t0': 10.0, 'stepsize': 1.0, 'stepsize_jitter': 0.0}}, {'random_seed': '345470392', 'chain_id': 2, 'init': 'random', 'init_radius': 2.0, 'enable_random_init': False, 'append_samples': False, 'method': 'SAMPLING', 'iter': 1000, 'warmup': 500, 'thin': 1, 'refresh': 100, 'test_grad': False, 'sampler_t': 'NUTS', 'control': {'adapt_engaged': True, 'adapt_gamma': 0.05, 'adapt_delta': 0.8, 'adapt_kappa': 0.75, 'adapt_init_buffer': 75, 'adapt_term_buffer': 50, 'adapt_window': 25, 'adapt_t0': 10.0, 'stepsize': 1.0, 'stepsize_jitter': 0.0}}, {'random_seed': '345470392', 'chain_id': 3, 'init': 'random', 'init_radius': 2.0, 'enable_random_init': False, 'append_samples': False, 'method': 'SAMPLING', 'iter': 1000, 'warmup': 500, 'thin': 1, 'refresh': 100, 'test_grad': False, 'sampler_t': 'NUTS', 'control': {'adapt_engaged': True, 'adapt_gamma': 0.05, 'adapt_delta': 0.8, 'adapt_kappa': 0.75, 'adapt_init_buffer': 75, 'adapt_term_buffer': 50, 'adapt_window': 25, 'adapt_t0': 10.0, 'stepsize': 1.0, 'stepsize_jitter': 0.0}}]</dd><dt><span>inits :</span></dt><dd>[[1.7126106914526407, -0.030748403931205592, 0.22247692354028922, 1.563010620085344, 1.736125399192665, 1.747477672816779, 1.3619421724977934, 1.862291818270751, 1.823006344878086, 1.9510697680488691, 1.7802003879055686, 1.9723026966582544, 1.5794589603977573, 1.423259411648393, 1.1533007326197822, 1.665203635965765, 1.2206841139058222, 1.5134883035255693, 1.7157023710552108, 0.9881839736406081, 1.069917520625811, 1.6653581146389125, 1.409099714503847, 1.4401322196838116, 1.6619755510164553, 1.4123525809413187, 1.230305712619689, 0.9892577439052912, 1.1956685234367415, 1.290803397086368, 1.6556721281980755, 1.0359510222207802, 1.439786579369818, 1.1183112282535932, 1.7343475002773099, 1.1046589804210964, 1.2283133412643932, 1.3207407493167025, 1.218904874415506, 1.1003995539499523, 0.9975735945253834, 1.350742576917557, 1.2532881850639583, 1.1823273075743246, 1.1012409075612908, 1.2628103800322803, 1.0147299582505995, 0.8589847106505416, 0.8898727253796739, 0.9782458546698332, 1.2665383438938882, 1.228723618730904, 0.5637394005411227, 0.7582721484070517, 1.0776734106206127, 0.7136245342532639, 0.9501103607543755, 1.237519347530787, 1.0065130041924768, 0.6463745867889956, 0.9206908332482945, 0.7868266683971612, 0.9435344545136928, 0.7803438724119967, 1.0043123973930805, 0.7690345998354766, 0.8673992960057956, 0.5130348495323778, 0.9577832508776849, 0.8487364496512848, 0.56420484463849, 0.3808267388243632, 0.8432494355018948, 0.7778493238482694, 0.4678642119028372, 0.94579232925843, 0.40229430763676355, 0.6920895344930726, 0.5109142229354574, 0.33922752258717415, 0.31074683835556594, 0.25225379978818274, 0.689448177734008, 0.684476788564254, 0.2715522715334655, 0.4946368245978605, 0.9866808184224851, 0.4169624690140418, 0.6718100078505944, 0.5023736247617323, 0.6529272673144919, 0.15714348325402075, 0.5642690591022588, 0.3123409660119498, 0.5021046802979686, 0.12687982165999667, -0.08504371711810915, 0.20288571183597803, 0.31733394346830934, 0.11187690328850451, -0.3845369228583567, 0.30810916044917214, 0.39284771909908267], [-1.1134838907791371, -1.1238437558759764, 0.9262276644304522, -1.0001364048783417, -2.782522071985624, -3.7351937289534938, -2.83382509828959, -3.9792167629245547, -5.325575986287659, -3.9719222630911326, -4.9701162633268146, -4.889873484536508, -8.098215724972203, -6.243735913970589, -6.789380005195758, -8.584457382718497, -7.914841940120913, -10.035717691640423, -9.846791491398221, -10.640525911555425, -10.449218679505659, -10.172584281939635, -12.019409036276185, -13.549679369471825, -13.164603583641847, -12.383514257856618, -13.782400280097933, -16.546919393640355, -15.30576145363258, -14.948107811268722, -14.70816502361977, -15.127552271660006, -17.832674554385495, -16.775446861311107, -18.661588011977177, -18.36835186425152, -20.394695344524703, -21.439750398706323, -20.389732246228064, -22.17381654540745, -22.641342007687257, -21.621532944156733, -23.751810424861787, -24.9088896091435, -24.44293953585543, -23.331151799198576, -25.799087598211663, -25.72683651993046, -25.48519331614153, -27.093526224961874, -27.007351803525772, -27.701731039425788, -28.554065742695233, -29.48530243664214, -28.855743050674327, -30.933087043072334, -31.680025416945885, -30.820205556693764, -33.27033854652422, -33.47350243177385, -34.186533699921384, -33.16471915066973, -35.323053269050135, -35.03193254130218, -35.49445872914028, -35.91028138752765, -37.55910680289756, -37.15440219323971, -38.86861034335689, -38.54267862730015, -39.8214291646721, -40.0671002094611, -41.08407230470809, -39.88130992708778, -42.14392256076823, -42.646971743334106, -44.230222897142525, -43.459515365024444, -44.63644938096393, -44.68353023478125, -43.33238239646698, -44.386574144691686, -47.47950487798273, -47.11019966930678, -45.64532647072011, -47.29140500752328, -47.8741527359583, -46.830155827750204, -49.97442249976532, -48.90904201933886, -48.687968198431754, -50.54786356802271, -53.90826980794699, -50.80527241272121, -51.467416347151236, -54.79437858746194, -53.13239027349298, -55.006846225468095, -54.82657088035839, -55.907371006058746, -56.79163455597591, -56.53305517174383, -56.40714707088171], [0.7591034533841987, 1.9826051995642704, 0.16793431858092658, 0.805312735131347, 1.6118763010848847, 2.946838444483057, 3.986470083405372, 4.662304025186486, 5.663232521610033, 6.47764386550193, 8.063336371592063, 8.973610823364023, 9.683577887532342, 10.777672929044504, 11.483516345441842, 12.669825782382464, 13.81617825420758, 14.727078095609041, 15.653286560423263, 16.85465470427706, 17.987686798235003, 18.441188207454093, 19.75095010792246, 20.9754254345274, 21.85535971129151, 22.533179271441444, 23.50227798608833, 25.00778874809557, 25.614353580458648, 27.172987133980325, 27.658779705317993, 28.954196590003786, 30.15981298135688, 30.463482542940092, 31.689433708885595, 32.524210496649246, 33.749313054299236, 34.83697661146893, 35.751436298022114, 36.60985428849034, 37.66136044211557, 38.55513192121144, 39.75641664041576, 40.969800417605995, 41.914429503403355, 42.793784152363386, 43.72267631681878, 44.881413319736005, 45.78253954987451, 47.03942682509191, 47.95070882098185, 48.80238646913053, 49.95797756092825, 50.80882028984611, 51.8271754072294, 52.588018832719314, 54.10576353161209, 54.95576050804802, 55.89297305055758, 56.93988171758835, 58.02306474601656, 58.77058441411522, 60.16084890417911, 60.777300374837594, 61.91383765149841, 62.767107949227004, 63.944942003216745, 64.73034265551848, 65.87382466221956, 66.6603136060696, 67.73754512574801, 69.16076749335465, 69.8769846512889, 70.7057558927324, 71.68907293809872, 72.94513751725212, 73.82240665566322, 74.80419979945611, 75.72663080825859, 76.83568810191117, 78.08416880540659, 78.66852993263308, 79.56930634230059, 80.90007304107715, 81.78419498059216, 82.95122544359755, 84.0829806921834, 85.08294160279907, 85.76766354702576, 86.86449445647895, 87.65391529214156, 88.92242615016434, 89.52614263110287, 90.89244320699623, 91.86356426165837, 92.94479767697617, 93.90322653999661, 94.91265847220282, 95.91238715716095, 96.80811913044283, 97.73116607328464, 98.94966159285758, 99.87780404837258], [0.15253633126529165, -0.36145359607646665, 2.9280508124252953, 0.44250791094032554, -3.6799518142844327, -2.637575384337925, 3.119163033609511, -5.903861852643543, -2.4637571292352485, -4.816611487752867, -0.0077577799217010135, -5.0189534846237605, -1.8634726123276462, -7.709913469136537, -1.5653880871383996, 2.28507271712304, 1.0967970812627015, -4.334732711225383, -2.360323504043661, -0.39052505975241747, -5.616006050348081, -1.4596375055706772, -2.69918271254674, 0.9850547221829933, -1.2274417251958054, -5.560564712256568, -7.5781701998946165, -2.428212736177295, -4.857753561980811, -2.0866409143312015, -7.691703594910914, -4.218549670102667, -10.925917855564652, -8.81457774471066, -6.350847179057185, -5.868837216402981, -0.31264571876556335, -9.164780377262067, -5.120628415520505, -9.278690325085478, -10.99975092471847, -5.957421945498301, -5.224847538211541, -5.591515757241417, -8.243928421143757, -2.0404183877048476, -5.084809273978762, -9.757553467949597, -9.63713618833015, -7.866345955920552, -13.292801501220811, -8.026299189765593, -12.22354699393636, -8.06460770280281, -11.70071071659354, -9.60974123905669, -5.95337086054841, -7.032222067826643, -10.075801891488775, -11.180074524884002, -16.74247715518144, -10.661417484399925, -8.879564959344641, -11.329560330559646, -6.365956064783927, -12.107391549879763, -8.917615099302498, -8.58178416233676, -9.0983027670198, -16.252306312272093, -14.010782067805266, -14.997204857624105, -12.531442981775685, -17.467706632832485, -9.682956913321522, -15.941717677222895, -12.981704646961063, -15.907159314915198, -12.057734353093792, -9.604060313033159, -14.966573074038134, -18.42544143538557, -13.595692084709363, -13.676939354896357, -15.83130940868651, -16.91040917415477, -17.010379505766938, -17.573009441087734, -15.007376906661394, -17.692655622589996, -14.476798257946067, -17.838639229747464, -14.25081695011485, -18.05170466422207, -17.966436001117373, -11.091651588821101, -17.31954264519986, -22.554457294516784, -17.64570979361735, -19.822745317065376, -16.65596740508466, -19.8783069256713, -16.612644786945985]]</dd><dt><span>step_size :</span></dt><dd>[0.376451, 0.417677, 0.382013, 0.282232]</dd><dt><span>metric :</span></dt><dd>['diag_e', 'diag_e', 'diag_e', 'diag_e']</dd><dt><span>inv_metric :</span></dt><dd>[[0.360859, 0.000475137, 0.00443736], [0.34879, 0.000404285, 0.00467239], [0.280667, 0.000337829, 0.00543657], [0.425118, 0.000556571, 0.00522525]]</dd><dt><span>adaptation_info :</span></dt><dd>['# Adaptation terminated\n# Step size = 0.376451\n# Diagonal elements of inverse mass matrix:\n# 0.360859, 0.000475137, 0.00443736\n', '# Adaptation terminated\n# Step size = 0.417677\n# Diagonal elements of inverse mass matrix:\n# 0.34879, 0.000404285, 0.00467239\n', '# Adaptation terminated\n# Step size = 0.382013\n# Diagonal elements of inverse mass matrix:\n# 0.280667, 0.000337829, 0.00543657\n', '# Adaptation terminated\n# Step size = 0.282232\n# Diagonal elements of inverse mass matrix:\n# 0.425118, 0.000556571, 0.00522525\n']</dd><dt><span>stan_code :</span></dt><dd>
data {
  // Define data for fitting
  int&lt;lower=0&gt; N;
  vector[N] x;
  vector[N] y;
}

parameters {
  real b0;
  real b1;
  real&lt;lower=0&gt; sigma_e;
}

model {
  b0 ~ normal(0, 10);
  b1 ~ normal(0, 10);
  sigma_e ~ normal(0, 10);
  for (i in 1:N) {
    y[i] ~ normal(b0 + b1 * x[i], sigma_e);  // use only data for fitting
  }

}

generated quantities {
    vector[N] y_hat;

    for (i in 1:N) {
        // pointwise log likelihood will be calculated outside stan, 
        // posterior predictive however will be generated here, there are 
        // no restrictions on adding more generated quantities
        y_hat[i] = normal_rng(b0 + b1 * x[i], sigma_e);
    }
}
</dd></dl></div></li></ul></div></div><br/></div>
</ul>
</div>
</li>
<li class="xr-section-item">
<input class="xr-section-summary-in" id="idata_observed_data068c4ac2-6729-4aae-aa8a-be5ef7cf39ef" type="checkbox"/>
<label class="xr-section-summary" for="idata_observed_data068c4ac2-6729-4aae-aa8a-be5ef7cf39ef">observed_data</label>
<div class="xr-section-inline-details"></div>
<div class="xr-section-details">
<ul class="xr-var-list" id="xr-dataset-coord-list">
<div style="padding-left:2rem;"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt, dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt;
Dimensions:  (time: 100)
Coordinates:
  * time     (time) int64 0 1 2 3 4 5 6 7 8 9 ... 90 91 92 93 94 95 96 97 98 99
Data variables:
    y        (time) float64 -1.412 -7.319 1.151 1.502 ... 48.49 48.52 46.03
Attributes:
    created_at:                 2020-10-06T01:27:54.841473
    arviz_version:              0.10.0
    inference_library:          pystan
    inference_library_version:  2.19.1.1</pre><div class="xr-wrap" hidden=""><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input class="xr-section-summary-in" disabled="" id="section-816548df-a8d4-466a-84dd-c1a03802bba4" type="checkbox"/><label class="xr-section-summary" for="section-816548df-a8d4-466a-84dd-c1a03802bba4" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">time</span>: 100</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input checked="" class="xr-section-summary-in" id="section-b0fa9138-dbbb-4ed2-9f7f-c2919186e972" type="checkbox"/><label class="xr-section-summary" for="section-b0fa9138-dbbb-4ed2-9f7f-c2919186e972">Coordinates: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">time</span></div><div class="xr-var-dims">(time)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 6 ... 94 95 96 97 98 99</div><input class="xr-var-attrs-in" disabled="" id="attrs-de9c6127-9f14-4e86-9b52-baf52e498169" type="checkbox"/><label for="attrs-de9c6127-9f14-4e86-9b52-baf52e498169" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-c7870795-6f6e-4ad3-aa1c-dbc702da3a0b" type="checkbox"/><label for="data-c7870795-6f6e-4ad3-aa1c-dbc702da3a0b" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,
       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,
       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53,
       54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71,
       72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89,
       90, 91, 92, 93, 94, 95, 96, 97, 98, 99])</pre></div></li></ul></div></li><li class="xr-section-item"><input checked="" class="xr-section-summary-in" id="section-ef9cf7ef-5c76-490e-8fee-218492ddb51d" type="checkbox"/><label class="xr-section-summary" for="section-ef9cf7ef-5c76-490e-8fee-218492ddb51d">Data variables: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>y</span></div><div class="xr-var-dims">(time)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-1.412 -7.319 1.151 ... 48.52 46.03</div><input class="xr-var-attrs-in" disabled="" id="attrs-597cff98-85f4-4c70-8483-8eddc16947d3" type="checkbox"/><label for="attrs-597cff98-85f4-4c70-8483-8eddc16947d3" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-103fda08-590f-4e0b-a3d1-0703343c18b8" type="checkbox"/><label for="data-103fda08-590f-4e0b-a3d1-0703343c18b8" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([-1.41202037, -7.3186587 ,  1.15145745,  1.50159596, -0.66638434,
        1.340505  ,  0.94309618, -3.74339279, -0.34243761,  4.41332204,
        3.52852595, -0.38735502,  6.92937569,  2.17738437,  2.29506712,
        2.479826  ,  4.32780469, 14.8236344 ,  8.58376674, 13.86029246,
        8.30748541,  9.42697384,  6.20130931, 12.74674786, 14.49628457,
       12.37415809, 13.04994867, 12.27711609, 13.04606435, 15.07724923,
       16.25148031, 10.18710661, 12.24013837, 13.51964002,  9.40025182,
       20.11401051, 19.57963549, 17.26609676, 16.39293544, 15.4848222 ,
       19.07510716, 19.94747454, 18.05554676, 18.95703705, 21.97194249,
       18.55533794, 21.38972486, 17.64270549, 22.38207915, 20.23227438,
       22.3752402 , 22.69176278, 25.10069955, 22.29368553, 25.38288326,
       27.6663142 , 26.60546597, 20.45069871, 27.89511126, 27.62673933,
       25.45690863, 25.41379887, 28.68450485, 36.54353412, 25.65553597,
       29.01507728, 30.97776362, 35.17952383, 31.07761309, 38.35764652,
       32.82119153, 32.72583667, 34.15217468, 34.91746821, 39.98665155,
       32.85510289, 35.76383771, 37.94409775, 37.02228539, 37.94068802,
       42.21713708, 36.9942534 , 36.55582315, 36.82877733, 42.81862081,
       37.00939662, 41.67250008, 37.28144053, 44.59191824, 44.05883374,
       42.87139157, 47.30850894, 48.57268519, 46.25413295, 51.7918344 ,
       48.79686829, 51.28945751, 48.48599342, 48.52212075, 46.03052542])</pre></div></li></ul></div></li><li class="xr-section-item"><input checked="" class="xr-section-summary-in" id="section-1d8898b8-3f89-4c5b-ac16-dd6608768ec1" type="checkbox"/><label class="xr-section-summary" for="section-1d8898b8-3f89-4c5b-ac16-dd6608768ec1">Attributes: <span>(4)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>created_at :</span></dt><dd>2020-10-06T01:27:54.841473</dd><dt><span>arviz_version :</span></dt><dd>0.10.0</dd><dt><span>inference_library :</span></dt><dd>pystan</dd><dt><span>inference_library_version :</span></dt><dd>2.19.1.1</dd></dl></div></li></ul></div></div><br/></div>
</ul>
</div>
</li>
<li class="xr-section-item">
<input class="xr-section-summary-in" id="idata_constant_data4dc2617d-7b41-40de-9f45-b6a0a69e80b7" type="checkbox"/>
<label class="xr-section-summary" for="idata_constant_data4dc2617d-7b41-40de-9f45-b6a0a69e80b7">constant_data</label>
<div class="xr-section-inline-details"></div>
<div class="xr-section-details">
<ul class="xr-var-list" id="xr-dataset-coord-list">
<div style="padding-left:2rem;"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt, dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt;
Dimensions:  (time: 100)
Coordinates:
  * time     (time) int64 0 1 2 3 4 5 6 7 8 9 ... 90 91 92 93 94 95 96 97 98 99
Data variables:
    x        (time) float64 0.0 0.5051 1.01 1.515 ... 48.48 48.99 49.49 50.0
Attributes:
    created_at:                 2020-10-06T01:27:54.842743
    arviz_version:              0.10.0
    inference_library:          pystan
    inference_library_version:  2.19.1.1</pre><div class="xr-wrap" hidden=""><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input class="xr-section-summary-in" disabled="" id="section-89833ff9-e4fe-40b8-b2d1-643bb74bb592" type="checkbox"/><label class="xr-section-summary" for="section-89833ff9-e4fe-40b8-b2d1-643bb74bb592" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">time</span>: 100</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input checked="" class="xr-section-summary-in" id="section-e04e6489-72c0-4249-a0ce-4f40c2d64902" type="checkbox"/><label class="xr-section-summary" for="section-e04e6489-72c0-4249-a0ce-4f40c2d64902">Coordinates: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">time</span></div><div class="xr-var-dims">(time)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 6 ... 94 95 96 97 98 99</div><input class="xr-var-attrs-in" disabled="" id="attrs-5114b79e-664c-4eda-aa3d-d852b7840593" type="checkbox"/><label for="attrs-5114b79e-664c-4eda-aa3d-d852b7840593" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-59e8348e-4c7c-4b98-8f91-ad3ffe203a68" type="checkbox"/><label for="data-59e8348e-4c7c-4b98-8f91-ad3ffe203a68" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,
       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,
       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53,
       54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71,
       72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89,
       90, 91, 92, 93, 94, 95, 96, 97, 98, 99])</pre></div></li></ul></div></li><li class="xr-section-item"><input checked="" class="xr-section-summary-in" id="section-f0244a21-b93b-4d37-9834-a179edc9c5cf" type="checkbox"/><label class="xr-section-summary" for="section-f0244a21-b93b-4d37-9834-a179edc9c5cf">Data variables: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>x</span></div><div class="xr-var-dims">(time)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.0 0.5051 1.01 ... 49.49 50.0</div><input class="xr-var-attrs-in" disabled="" id="attrs-b6fca867-2c9f-49b5-90ff-db9aa32ba35f" type="checkbox"/><label for="attrs-b6fca867-2c9f-49b5-90ff-db9aa32ba35f" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-a9aa3df1-5fb5-49e8-aa4d-af058e28a3c3" type="checkbox"/><label for="data-a9aa3df1-5fb5-49e8-aa4d-af058e28a3c3" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([ 0.        ,  0.50505051,  1.01010101,  1.51515152,  2.02020202,
        2.52525253,  3.03030303,  3.53535354,  4.04040404,  4.54545455,
        5.05050505,  5.55555556,  6.06060606,  6.56565657,  7.07070707,
        7.57575758,  8.08080808,  8.58585859,  9.09090909,  9.5959596 ,
       10.1010101 , 10.60606061, 11.11111111, 11.61616162, 12.12121212,
       12.62626263, 13.13131313, 13.63636364, 14.14141414, 14.64646465,
       15.15151515, 15.65656566, 16.16161616, 16.66666667, 17.17171717,
       17.67676768, 18.18181818, 18.68686869, 19.19191919, 19.6969697 ,
       20.2020202 , 20.70707071, 21.21212121, 21.71717172, 22.22222222,
       22.72727273, 23.23232323, 23.73737374, 24.24242424, 24.74747475,
       25.25252525, 25.75757576, 26.26262626, 26.76767677, 27.27272727,
       27.77777778, 28.28282828, 28.78787879, 29.29292929, 29.7979798 ,
       30.3030303 , 30.80808081, 31.31313131, 31.81818182, 32.32323232,
       32.82828283, 33.33333333, 33.83838384, 34.34343434, 34.84848485,
       35.35353535, 35.85858586, 36.36363636, 36.86868687, 37.37373737,
       37.87878788, 38.38383838, 38.88888889, 39.39393939, 39.8989899 ,
       40.4040404 , 40.90909091, 41.41414141, 41.91919192, 42.42424242,
       42.92929293, 43.43434343, 43.93939394, 44.44444444, 44.94949495,
       45.45454545, 45.95959596, 46.46464646, 46.96969697, 47.47474747,
       47.97979798, 48.48484848, 48.98989899, 49.49494949, 50.        ])</pre></div></li></ul></div></li><li class="xr-section-item"><input checked="" class="xr-section-summary-in" id="section-a09239e3-cbf4-413c-b558-1d56f1f3f4a8" type="checkbox"/><label class="xr-section-summary" for="section-a09239e3-cbf4-413c-b558-1d56f1f3f4a8">Attributes: <span>(4)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>created_at :</span></dt><dd>2020-10-06T01:27:54.842743</dd><dt><span>arviz_version :</span></dt><dd>0.10.0</dd><dt><span>inference_library :</span></dt><dd>pystan</dd><dt><span>inference_library_version :</span></dt><dd>2.19.1.1</dd></dl></div></li></ul></div></div><br/></div>
</ul>
</div>
</li>
<li class="xr-section-item">
<input class="xr-section-summary-in" id="idata_log_likelihood7fc1116f-cb31-4e3c-afd8-776b27aafa05" type="checkbox"/>
<label class="xr-section-summary" for="idata_log_likelihood7fc1116f-cb31-4e3c-afd8-776b27aafa05">log_likelihood</label>
<div class="xr-section-inline-details"></div>
<div class="xr-section-details">
<ul class="xr-var-list" id="xr-dataset-coord-list">
<div style="padding-left:2rem;"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt, dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt;
Dimensions:  (chain: 4, draw: 500, time: 100)
Coordinates:
  * time     (time) int64 0 1 2 3 4 5 6 7 8 9 ... 90 91 92 93 94 95 96 97 98 99
  * chain    (chain) int64 0 1 2 3
  * draw     (draw) int64 0 1 2 3 4 5 6 7 8 ... 492 493 494 495 496 497 498 499
Data variables:
    x        (time, chain, draw) float64 -2.066 -2.272 -1.931 ... -2.53 -2.504</pre><div class="xr-wrap" hidden=""><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input class="xr-section-summary-in" disabled="" id="section-d4bd35bf-e5aa-4642-90ac-805010fd90c6" type="checkbox"/><label class="xr-section-summary" for="section-d4bd35bf-e5aa-4642-90ac-805010fd90c6" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">chain</span>: 4</li><li><span class="xr-has-index">draw</span>: 500</li><li><span class="xr-has-index">time</span>: 100</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input checked="" class="xr-section-summary-in" id="section-b49d338c-6768-416b-9052-51ca8b4923fa" type="checkbox"/><label class="xr-section-summary" for="section-b49d338c-6768-416b-9052-51ca8b4923fa">Coordinates: <span>(3)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">time</span></div><div class="xr-var-dims">(time)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 6 ... 94 95 96 97 98 99</div><input class="xr-var-attrs-in" disabled="" id="attrs-5f3914ed-3da3-4c3a-94f0-4d5c4303991e" type="checkbox"/><label for="attrs-5f3914ed-3da3-4c3a-94f0-4d5c4303991e" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-e5dcfcf2-88e9-4729-8148-732a6525ed47" type="checkbox"/><label for="data-e5dcfcf2-88e9-4729-8148-732a6525ed47" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,
       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,
       36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53,
       54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71,
       72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89,
       90, 91, 92, 93, 94, 95, 96, 97, 98, 99])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">chain</span></div><div class="xr-var-dims">(chain)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3</div><input class="xr-var-attrs-in" disabled="" id="attrs-1f64c6fa-657c-4430-b9eb-35a196f9bd16" type="checkbox"/><label for="attrs-1f64c6fa-657c-4430-b9eb-35a196f9bd16" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-284c2650-3c7f-4eb2-85be-26c1eb50e465" type="checkbox"/><label for="data-284c2650-3c7f-4eb2-85be-26c1eb50e465" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([0, 1, 2, 3])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">draw</span></div><div class="xr-var-dims">(draw)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 ... 495 496 497 498 499</div><input class="xr-var-attrs-in" disabled="" id="attrs-5a7919f0-0891-4b96-af31-66ce534b26de" type="checkbox"/><label for="attrs-5a7919f0-0891-4b96-af31-66ce534b26de" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-324d0bdb-0a07-487a-913f-53d0d5fa751d" type="checkbox"/><label for="data-324d0bdb-0a07-487a-913f-53d0d5fa751d" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([  0,   1,   2, ..., 497, 498, 499])</pre></div></li></ul></div></li><li class="xr-section-item"><input checked="" class="xr-section-summary-in" id="section-00aee8c9-a80f-420d-9bba-8bf54f040cb1" type="checkbox"/><label class="xr-section-summary" for="section-00aee8c9-a80f-420d-9bba-8bf54f040cb1">Data variables: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>x</span></div><div class="xr-var-dims">(time, chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-2.066 -2.272 ... -2.53 -2.504</div><input class="xr-var-attrs-in" disabled="" id="attrs-5b8ccab2-14f5-4266-a4a5-7bc996b5a57e" type="checkbox"/><label for="attrs-5b8ccab2-14f5-4266-a4a5-7bc996b5a57e" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-54709075-ddd4-4861-bd7b-d45e1ae8201c" type="checkbox"/><label for="data-54709075-ddd4-4861-bd7b-d45e1ae8201c" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[-2.06613587, -2.27224873, -1.93141031, ..., -2.02189885,
         -1.87833916, -2.03796724],
        [-2.10183686, -2.11922292, -1.9539534 , ..., -2.00373665,
         -2.0086278 , -2.01849919],
        [-2.01414603, -2.00720986, -2.00776791, ..., -2.02246979,
         -2.0541148 , -2.05775894],
        [-2.09426385, -2.08480429, -2.15634047, ..., -1.91463974,
         -2.22255144, -2.2564248 ]],

       [[-3.9653583 , -3.07845137, -4.16154214, ..., -3.75536919,
         -4.44141338, -3.94895912],
        [-3.48275917, -3.44536726, -4.09639708, ..., -3.82873285,
         -3.82205147, -3.754851  ],
        [-3.76334136, -3.78926207, -4.23100701, ..., -4.19449868,
         -3.98581789, -3.66467314],
        [-3.78446115, -3.81766954, -3.31583137, ..., -4.62938265,
         -3.16109007, -3.30396731]],

       [[-2.23455997, -2.62459603, -2.29054081, ..., -2.40774334,
         -2.23107081, -2.25157079],
...
        [-2.21667577, -2.12953375, -1.9615624 , ..., -2.06821034,
         -2.06706173, -2.23653893]],

       [[-2.06893725, -2.13251227, -1.87962108, ..., -1.94454713,
         -1.87310459, -2.05976964],
        [-1.9983384 , -2.10417813, -1.91230973, ..., -1.93687083,
         -1.93641759, -1.91116912],
        [-1.88195507, -1.87522023, -2.1059045 , ..., -2.10408599,
         -2.21866659, -2.00165327],
        [-2.15157242, -2.09040809, -1.94780521, ..., -1.987641  ,
         -2.05546711, -2.21947147]],

       [[-2.41112142, -2.41551375, -2.53082343, ..., -2.38050058,
         -2.28750115, -2.29069769],
        [-2.38288638, -2.19294608, -2.56848047, ..., -2.36814641,
         -2.61401326, -2.62103004],
        [-2.47616385, -2.43319128, -2.16428596, ..., -2.19356027,
         -2.12220576, -2.73873861],
        [-2.23984825, -2.36019642, -2.54084624, ..., -2.17460308,
         -2.53040691, -2.5040681 ]]])</pre></div></li></ul></div></li><li class="xr-section-item"><input class="xr-section-summary-in" disabled="" id="section-bb2c90c3-49f2-4464-8dd0-b00f0aa9c9f4" type="checkbox"/><label class="xr-section-summary" for="section-bb2c90c3-49f2-4464-8dd0-b00f0aa9c9f4" title="Expand/collapse section">Attributes: <span>(0)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"></dl></div></li></ul></div></div><br/></div>
</ul>
</div>
</li>
</ul>
</div>
<style> /* CSS stylesheet for displaying InferenceData objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-sections.group-sections {
  grid-template-columns: auto;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt, dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
.xr-wrap{width:700px!important;} </style></div></div>
</div>
<p>We will create a subclass of <a class="reference internal" href="../api/generated/arviz.SamplingWrapper.html#arviz.SamplingWrapper" title="arviz.SamplingWrapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">SamplingWrapper</span></code></a>. Therefore, instead of having to implement all functions required by <a class="reference internal" href="../api/generated/arviz.reloo.html#arviz.reloo" title="arviz.reloo"><code class="xref py py-func docutils literal notranslate"><span class="pre">reloo()</span></code></a> we only have to implement <a class="reference internal" href="../api/generated/arviz.SamplingWrapper.sel_observations.html#arviz.SamplingWrapper.sel_observations" title="arviz.SamplingWrapper.sel_observations"><code class="xref py py-func docutils literal notranslate"><span class="pre">sel_observations()</span></code></a> (we are cloning  <a class="reference internal" href="../api/generated/arviz.SamplingWrapper.sample.html#arviz.SamplingWrapper.sample" title="arviz.SamplingWrapper.sample"><code class="xref py py-func docutils literal notranslate"><span class="pre">sample()</span></code></a> and <a class="reference internal" href="../api/generated/arviz.SamplingWrapper.get_inference_data.html#arviz.SamplingWrapper.get_inference_data" title="arviz.SamplingWrapper.get_inference_data"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_inference_data()</span></code></a> from the <a class="reference internal" href="../api/generated/arviz.SamplingWrapper.html#arviz.SamplingWrapper" title="arviz.SamplingWrapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">SamplingWrapper</span></code></a> in order to use <code class="docutils literal notranslate"><span class="pre">apply_ufunc</span></code> instead of assuming the log likelihood is calculated within Stan).</p>
<p>Let’s check the 2 outputs of <code class="docutils literal notranslate"><span class="pre">sel_observations</span></code>.</p>
<ol class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">data__i</span></code> is a dictionary because it is an argument of <code class="docutils literal notranslate"><span class="pre">sample</span></code> which will pass it as is to <code class="docutils literal notranslate"><span class="pre">model.sampling</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_ex</span></code> is a list because it is an argument to <code class="docutils literal notranslate"><span class="pre">log_likelihood__i</span></code> which will pass it as <code class="docutils literal notranslate"><span class="pre">*data_ex</span></code> to  <code class="docutils literal notranslate"><span class="pre">apply_ufunc</span></code>.</p></li>
</ol>
<p>More on <code class="docutils literal notranslate"><span class="pre">data_ex</span></code> and <code class="docutils literal notranslate"><span class="pre">apply_ufunc</span></code> integration is given below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">LinearRegressionWrapper</span><span class="p">(</span><a class="sphinx-codeautolink-a" href="../api/generated/arviz.SamplingWrapper.html#arviz.SamplingWrapper" title="arviz.wrappers.base.SamplingWrapper"><span class="n">az</span><span class="o">.</span><span class="n">SamplingWrapper</span></a><span class="p">):</span>
    <span class="k">def</span> <span class="nf">sel_observations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">):</span>
        <span class="n">xdata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">idata_orig</span><span class="o">.</span><span class="n">constant_data</span><span class="p">[</span><span class="s2">"x"</span><span class="p">]</span>
        <span class="n">ydata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">idata_orig</span><span class="o">.</span><span class="n">observed_data</span><span class="p">[</span><span class="s2">"y"</span><span class="p">]</span>
        <span class="n">mask</span> <span class="o">=</span> <a class="sphinx-codeautolink-a" href="https://numpy.org/doc/stable/reference/generated/numpy.isin.html#numpy.isin" title="numpy.isin"><span class="n">np</span><span class="o">.</span><span class="n">isin</span></a><span class="p">(</span><a class="sphinx-codeautolink-a" href="https://numpy.org/doc/stable/reference/generated/numpy.arange.html#numpy.arange" title="numpy.arange"><span class="n">np</span><span class="o">.</span><span class="n">arange</span></a><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">xdata</span><span class="p">)),</span> <span class="n">idx</span><span class="p">)</span>
        <span class="n">data__i</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"x"</span><span class="p">:</span> <span class="n">xdata</span><span class="p">[</span><span class="o">~</span><span class="n">mask</span><span class="p">],</span> <span class="s2">"y"</span><span class="p">:</span> <span class="n">ydata</span><span class="p">[</span><span class="o">~</span><span class="n">mask</span><span class="p">],</span> <span class="s2">"N"</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">ydata</span><span class="p">[</span><span class="o">~</span><span class="n">mask</span><span class="p">])}</span>
        <span class="n">data_ex</span> <span class="o">=</span> <span class="p">[</span><span class="n">ary</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span> <span class="k">for</span> <span class="n">ary</span> <span class="ow">in</span> <span class="p">(</span><span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span><span class="p">)]</span>
        <span class="k">return</span> <span class="n">data__i</span><span class="p">,</span> <span class="n">data_ex</span>
    
    <span class="k">def</span> <span class="nf">sample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">modified_observed_data</span><span class="p">):</span>
        <span class="c1">#Cloned from PyStan2SamplingWrapper.</span>
        <span class="n">fit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">sampling</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">modified_observed_data</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">sample_kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fit</span>

    <span class="k">def</span> <span class="nf">get_inference_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fit</span><span class="p">):</span>
        <span class="c1"># Cloned from PyStan2SamplingWrapper.</span>
        <span class="n">idata</span> <span class="o">=</span> <a class="sphinx-codeautolink-a" href="../api/generated/arviz.from_pystan.html#arviz.from_pystan" title="arviz.from_pystan"><span class="n">az</span><span class="o">.</span><span class="n">from_pystan</span></a><span class="p">(</span><span class="n">posterior</span><span class="o">=</span><span class="n">fit</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">idata_kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">idata</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">loo_orig</span> <span class="o">=</span> <a class="sphinx-codeautolink-a" href="../api/generated/arviz.loo.html#arviz.loo" title="arviz.loo"><span class="n">az</span><span class="o">.</span><span class="n">loo</span></a><span class="p">(</span><span class="n">idata</span><span class="p">,</span> <span class="n">pointwise</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">loo_orig</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Computed from 2000 by 100 log-likelihood matrix

         Estimate       SE
elpd_loo  -250.79     7.12
p_loo        2.95        -
------

Pareto k diagnostic values:
                         Count   Pct.
(-Inf, 0.5]   (good)      100  100.0%
 (0.5, 0.7]   (ok)          0    0.0%
   (0.7, 1]   (bad)         0    0.0%
   (1, Inf)   (very bad)    0    0.0%
</pre></div>
</div>
</div>
</div>
<p>In this case, the Leave-One-Out Cross Validation (LOO-CV) approximation using <a class="reference external" href="https://arxiv.org/abs/1507.02646">Pareto Smoothed Importance Sampling</a> (PSIS) works for all observations, so we will use modify <code class="docutils literal notranslate"><span class="pre">loo_orig</span></code> in order to make <a class="reference internal" href="../api/generated/arviz.reloo.html#arviz.reloo" title="arviz.reloo"><code class="xref py py-func docutils literal notranslate"><span class="pre">reloo()</span></code></a> believe that PSIS failed for some observations. This will also serve as a validation of our wrapper, as the PSIS LOO-CV already returned the correct value.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">loo_orig</span><span class="o">.</span><span class="n">pareto_k</span><span class="p">[[</span><span class="mi">13</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">73</span><span class="p">]]</span> <span class="o">=</span> <a class="sphinx-codeautolink-a" href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="numpy.array"><span class="n">np</span><span class="o">.</span><span class="n">array</span></a><span class="p">([</span><span class="mf">0.8</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">,</span> <span class="mf">2.6</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<p>We initialize our sampling wrapper. Let’s stop and analyze each of the arguments.</p>
<p>We use the <code class="docutils literal notranslate"><span class="pre">log_lik_fun</span></code> and <code class="docutils literal notranslate"><span class="pre">posterior_vars</span></code> argument to tell the wrapper how to call <a class="reference external" href="http://xarray.pydata.org/en/stable/generated/xarray.apply_ufunc.html#xarray.apply_ufunc" title="(in xarray v0.20.2.dev0)"><code class="xref py py-func docutils literal notranslate"><span class="pre">apply_ufunc()</span></code></a>. <code class="docutils literal notranslate"><span class="pre">log_lik_fun</span></code> is the function to be called, which is then called with the following positional arguments:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>log_lik_fun(*data_ex, *[idata__i.posterior[var_name] for var_name in posterior_vars]
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">data_ex</span></code> is the second element returned by <code class="docutils literal notranslate"><span class="pre">sel_observations</span></code> and <code class="docutils literal notranslate"><span class="pre">idata__i</span></code> is the <code class="docutils literal notranslate"><span class="pre">InferenceData</span></code> object result of <code class="docutils literal notranslate"><span class="pre">get_inference_data</span></code> which contains the fit on the subsetted data. We have generated <code class="docutils literal notranslate"><span class="pre">data_ex</span></code> to be a tuple of DataArrays so it plays nicely with this call signature.</p>
<p>We use <code class="docutils literal notranslate"><span class="pre">idata_orig</span></code> as a starting point, and mostly as a source of observed and constant data which is then subsetted in <code class="docutils literal notranslate"><span class="pre">sel_observations</span></code>.</p>
<p>Finally, <code class="docutils literal notranslate"><span class="pre">sample_kwargs</span></code> and <code class="docutils literal notranslate"><span class="pre">idata_kwargs</span></code> are used to make sure all refits and corresponding <code class="docutils literal notranslate"><span class="pre">InferenceData</span></code> are generated with the same properties.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pystan_wrapper</span> <span class="o">=</span> <span class="n">LinearRegressionWrapper</span><span class="p">(</span>
    <span class="n">sm</span><span class="p">,</span> 
    <span class="n">log_lik_fun</span><span class="o">=</span><span class="n">calculate_log_lik</span><span class="p">,</span> 
    <span class="n">posterior_vars</span><span class="o">=</span><span class="p">(</span><span class="s2">"b0"</span><span class="p">,</span> <span class="s2">"b1"</span><span class="p">,</span> <span class="s2">"sigma_e"</span><span class="p">),</span>
    <span class="n">idata_orig</span><span class="o">=</span><span class="n">idata</span><span class="p">,</span> 
    <span class="n">sample_kwargs</span><span class="o">=</span><span class="n">sample_kwargs</span><span class="p">,</span> 
    <span class="n">idata_kwargs</span><span class="o">=</span><span class="n">idata_kwargs</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>And eventually, we can use this wrapper to call <code class="docutils literal notranslate"><span class="pre">az.reloo</span></code>, and compare the results with the PSIS LOO-CV results.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">loo_relooed</span> <span class="o">=</span> <a class="sphinx-codeautolink-a" href="../api/generated/arviz.reloo.html#arviz.reloo" title="arviz.reloo"><span class="n">az</span><span class="o">.</span><span class="n">reloo</span></a><span class="p">(</span><span class="n">pystan_wrapper</span><span class="p">,</span> <span class="n">loo_orig</span><span class="o">=</span><span class="n">loo_orig</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/home/oriol/miniconda3/envs/arviz/lib/python3.8/site-packages/arviz/stats/stats_refitting.py:99: UserWarning: reloo is an experimental and untested feature
  warnings.warn("reloo is an experimental and untested feature", UserWarning)
arviz.stats.stats_refitting - INFO - Refitting model excluding observation 13
INFO:arviz.stats.stats_refitting:Refitting model excluding observation 13
arviz.stats.stats_refitting - INFO - Refitting model excluding observation 42
INFO:arviz.stats.stats_refitting:Refitting model excluding observation 42
arviz.stats.stats_refitting - INFO - Refitting model excluding observation 56
INFO:arviz.stats.stats_refitting:Refitting model excluding observation 56
arviz.stats.stats_refitting - INFO - Refitting model excluding observation 73
INFO:arviz.stats.stats_refitting:Refitting model excluding observation 73
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">loo_relooed</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Computed from 2000 by 100 log-likelihood matrix

         Estimate       SE
elpd_loo  -250.79     7.12
p_loo        2.95        -
------

Pareto k diagnostic values:
                         Count   Pct.
(-Inf, 0.5]   (good)      100  100.0%
 (0.5, 0.7]   (ok)          0    0.0%
   (0.7, 1]   (bad)         0    0.0%
   (1, Inf)   (very bad)    0    0.0%
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">loo_orig</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Computed from 2000 by 100 log-likelihood matrix

         Estimate       SE
elpd_loo  -250.79     7.12
p_loo        2.95        -
------

Pareto k diagnostic values:
                         Count   Pct.
(-Inf, 0.5]   (good)       96   96.0%
 (0.5, 0.7]   (ok)          0    0.0%
   (0.7, 1]   (bad)         2    2.0%
   (1, Inf)   (very bad)    2    2.0%
</pre></div>
</div>
</div>
</div>
</section>
</div>
<!-- Previous / next buttons -->
<div class="prev-next-area">
<a class="left-prev" href="numpyro_refitting.html" id="prev-link" title="previous page">
<i class="fas fa-angle-left"></i>
<div class="prev-next-info">
<p class="prev-next-subtitle">previous</p>
<p class="prev-next-title">Refitting NumPyro models with ArviZ</p>
</div>
</a>
<a class="right-next" href="pymc3_refitting_xr_lik.html" id="next-link" title="next page">
<div class="prev-next-info">
<p class="prev-next-subtitle">next</p>
<p class="prev-next-title">Refitting PyMC3 models with ArviZ (and xarray)</p>
</div>
<i class="fas fa-angle-right"></i>
</a>
</div>
</main>
</div>
</div>
<script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>
<footer class="footer mt-5 mt-md-0">
<div class="container">
<div class="footer-item">
<p class="copyright">
    © Copyright 2018, ArviZ devs.<br/>
</p>
</div>
<div class="footer-item">
<p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.3.1.<br/>
</p>
</div>
</div>
</footer>
</body>
</html>